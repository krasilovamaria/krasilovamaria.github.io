{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/webpack/buildin/module.js","webpack:///./js/vendor.js","webpack:///./js/vendor/picturefill.js","webpack:///./js/vendor/shapes-polyfill.js","webpack:///./js/vendor/svgxuse.js"],"names":["window","ua","navigator","userAgent","HTMLPictureElement","test","match","RegExp","$1","addEventListener","timer","dummySrc","document","createElement","fixRespimg","img","source","sizes","picture","parentNode","nodeName","toUpperCase","cloneNode","insertBefore","firstElementChild","setTimeout","removeChild","_pfLastSize","offsetWidth","findPictureImgs","i","imgs","querySelectorAll","length","onResize","clearTimeout","mq","matchMedia","init","addListener","srcset","readyState","undefined","warn","eminpx","alwaysCheckWDescriptor","evalId","pf","isSupportTestReady","noop","image","getImgAttr","getAttribute","setImgAttr","setAttribute","removeImgAttr","removeAttribute","docElem","documentElement","types","cfg","algorithm","srcAttr","srcsetAttr","supportAbort","curSrcProp","regWDesc","regSize","setOptions","picturefillCFG","baseStyle","fsCss","isVwDirty","cssCache","sizeLengthCache","DPR","devicePixelRatio","units","px","anchor","alreadyRun","regexLeadingSpaces","regexLeadingCommasOrSpaces","regexLeadingNotSpaces","regexTrailingCommas","regexNonNegativeInteger","regexFloatingPoint","on","obj","evt","fn","capture","attachEvent","memoize","cache","input","isSpace","c","evalCSS","regLength","replace","args","arguments","index","string","buildStr","css","toLowerCase","parsedLength","Function","e","setResolution","candidate","sizesattr","w","cWidth","calcListLength","res","d","picturefill","opt","elements","plen","options","nodeType","context","qsa","reevaluate","reselect","sel","selShort","setupRun","fillImg","teardownRun","console","message","detectTypeSupport","type","typeUri","Image","onerror","onload","width","src","implementation","hasFeature","updateMetrics","Math","max","innerWidth","clientWidth","height","innerHeight","clientHeight","vw","vh","join","em","getEmValue","rem","chooseLowRes","lowerValue","higherValue","dprValue","isCached","bonusFactor","tooMuch","bonus","meanDensity","pow","sqrt","applyBestCandidate","srcSetCandidates","matchingSet","getSet","evaluated","setRes","applySetCandidate","ns","evaled","ascendingSort","a","b","setSrcToCur","set","sets","getCandidateForSrc","makeUrl","curSrc","curCan","candidates","parseSet","url","getAllSourceElements","len","sources","getElementsByTagName","push","media","parseSrcset","collectCharacters","regEx","chars","exec","substring","pos","inputLength","descriptors","currentDescriptor","state","parseDescriptors","pError","h","desc","lastChar","value","intVal","floatVal","parseInt","parseFloat","has1x","tokenize","charAt","slice","parseSizes","strValue","regexCssLengthWithUnits","regexCssCalc","unparsedSizesList","unparsedSizesListLength","unparsedSize","lastComponentValue","size","parseComponentValues","str","chrctr","component","componentArray","listArray","parenDepth","inComment","pushComponent","pushComponentArray","isValidNonNegativeSourceSizeValue","s","pop","matchesMedia","Date","getTime","substr","supSrcset","supSizes","supPicture","image2","complete","width2","width1","u","setSize","href","matches","mMQ","apply","calcLength","sourceSizeValue","supportsType","parseSize","sourceSizeStr","cands","body","div","originalHTMLCSS","style","cssText","originalBodyCSS","appendChild","sourceSizeListStr","uT","winningLength","j","bestCandidate","candidateSrc","abortCurSrc","imageData","dpr","cached","sort","setSrc","origWidth","parseSets","element","parent","srcsetAttribute","imageSet","isWDescripor","srcsetParsed","hasPicture","call","pic","supported","parsed","extreme","isDomReady","regReady","run","timerId","fillImgs","debounce","func","wait","timeout","timestamp","later","last","lastClientWidth","_","name","shift","module","exports","define","scope","Metrics","computedStyle","getComputedStyle","parseLength","margins","marginTop","marginRight","marginBottom","marginLeft","map","borders","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddings","paddingTop","paddingRight","paddingBottom","paddingLeft","borderBox","x","y","offsetHeight","marginBox","self","radii","radius","split","toPixels","cssFloat","prototype","unitToPx","unit","getPropertyValue","setProperty","getUnitsMap","child","result","forEach","lineHeight","percentageBase","compareLineSlopes","origin","endPoint1","endPoint2","areCollinearPoints","p0","p1","p2","abs","areCoincidentPoints","isPointOnLineSegment","lineStartPoint","lineEndPoint","point","min","PolygonEdge","polygon","vertex1","vertex2","minX","maxX","containsPoint","overlapsYRange","y1","y2","edgeY1","edgeY2","isWithinYRange","inwardNormal","dx","dy","edgeLength","outwardNormal","n","xIntercept","vertex1Y","vertex2Y","clippedEdgeXRange","vertex1X","vertex2X","x1","x2","minYVertex","maxYVertex","xForY1","xForY2","clippedCircleXRange","center","yi","xi","ellipseXIntercept","ShapeEdge","OffsetEdge","edge","normalUnitVector","shapeMargin","anchorEdge","isVertexOrderClockwise","vertices","minVertexIndex","p","nextVertex","prevVertex","Polygon","fillRule","m_vertices","m_edges","shapeMarginEdges","edges","minY","maxY","clockwise","vertex1Index","vertex2Index","nextEdgeVertexIndex","edgeIndex","nextEdgeIndex","splice","bounds","Rect","vertexAt","edgeAt","isEmpty","nextVertexIndex","vertexIndex","nVertices","vertexIndex3","containsPointEvenOdd","crossingCount","vt","containsPointNonZero","windingNumber","edgeVerticesThatOverlapYRange","vertex","edgesThatOverlapYRange","shapeMarginEdgesThatOverlapYRange","compareEdgeMinX","edge1","edge2","compareVertexXIncreasing","leftExclusionEdge","xRange","overlappingEdges","overlappingVertices","error","compareEdgeMaxX","compareVertexXDecreasing","rightExclusionEdge","RasterInterval","startX","endX","RasterIntervals","yOffset","intervals","none","intervalAt","setIntervalAt","uniteIntervalAt","interval","intervalAtY","intervalAtContains","ShapeMarginIntervalGenerator","xIntercepts","generateIntervalAt","atY","forInterval","xInterceptsIndex","computeMarginIntervals","clip","mig","marginY0","marginY1","marginY","exception","log","RasterImage","canvas","g","getContext","drawImage","getImageData","hasData","alphaAt","data","Raster","box","shapeImageThreshold","whenReady","callback","raster","blob","computeIntervals","URL","revokeObjectURL","hasOwnProperty","createObjectURL","xhr","XMLHttpRequest","onreadystatechange","status","response","open","responseType","send","crossOrigin","threshold","rasterImage","alpha","Size","zeroSize","scale","factor","containsX","containsY","shiftLeftEdgeTo","newX","shiftTopEdgeTo","newY","shiftRightEdgeTo","shiftBottomEdgeTo","overlapsXRange","RoundedRect","rect","topLeft","topRight","bottomLeft","bottomRight","topLeftCorner","topRightCorner","bottomLeftCorner","bottomRightCorner","isRounded","isCornerRadiusNonZero","cornersInsetRect","scaleRadii","isRenderable","adjustRadii","maxRadiusWidth","maxRadiusHeight","widthRatio","heightRatio","rx","ry","minXInterceptAt","noInterceptReturnValue","maxXInterceptAt","computeOffsetHeight","areaLimit","round","leftCornerOffset","leftCorner","offset","rightCornerOffset","rightCorner","leftBoxOffset","rightBoxOffset","adaptiveOffsetFnGenerator","getTopCorner","getBottomCorner","getBoxOffset","getCornerOffset","offsets","topCorner","bottomCorner","boxArea","rightExclusionOffsets","leftExclusionOffsets","createRoundedRectForCircle","circle","margin","r","cx","cy","createRoundedRectForEllipse","ellipse","createRoundedRectForInset","inset","toSize","createRoundedRectForBox","createRaster","doLayout","clipRect","createPolygon","points","createShapeGeometry","shapeValue","geometry","shape","ShapeInfo","metrics","parserSettings","shapeOutside","ShapeValue","ready","onReady","line","top","bottom","left","right","exclusionEdgeValue","computeStepOffsets","step","ceil","lineBounds","computeAdaptiveOffsets","limit","layoutOffset","parameters","mode","Polyfill","script","currentScript","autoRun","fakeIt","wrapper","styles","sandbag","className","clear","prop","position","pointerEvents","subwrapper","borderHeight","borderTop","borderBottom","polyfill","settings","fontSize","shapeInfo","removePolyfill","oldParent","hasAttribute","force","forceLayout","Force","Layout","LayoutStyles","forceStyles","Styles","hasNativeSupport","properties","property","stylesLoaded","StylePolyfill","rules","rule","els","selector","relayout","teardown","Object","freeze","params","parseUrl","parseBox","parseBasicShape","computeClip","parseShapeMargin","parseShapeImageThreshold","text","adjustBounds","sign","reduce","prev","curr","adjustRadius","ratio","JSON","parse","stringify","pluck","arr","item","printShape","insets","printBox","command","parseInset","parseCircle","parseEllipse","parsePolygon","re","trim","positionOffsetToPixels","extent","direction","radiusToPixels","sides","parseEllipsoid","resolvedPositions","positions","canMergeBack","swap","coords","referenceBox","marginWidth","marginHeight","getStyleSheetElements","doc","stylesheets","Array","tags","StyleSheet","load","onSuccess","onError","responseText","textContent","StyleLoader","queueCount","stylesheet","onStyleSheetLoad","onStyleSheetError","onComplete","onStylesLoaded","ShapesPolyfill","create","checkUseElems","tid","debouncedCheck","unobserveChanges","observeChanges","observer","MutationObserver","observe","childList","subtree","attributes","disconnect","removeEventListener","ignore","createRequest","getOrigin","loc","protocol","host","Request","origin2","location","withCredentials","XDomainRequest","xlinkNS","base","bcr","fallback","hash","inProgressCount","isHidden","uses","observeIfDone","attrUpdateFunc","spec","useEl","setAttributeNS","onloadFunc","svg","innerHTML","overflow","firstChild","onErrorTimeout","ontimeout","getBoundingClientRect","getAttributeNS","getElementById","abort","winLoad"],"mappings":"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","file":"vendor.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/vendor.js\");\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import './vendor/svgxuse';\nimport './vendor/picturefill';\nimport './vendor/shapes-polyfill';\n","/*! picturefill - v3.0.2 - 2016-02-12\n * https://scottjehl.github.io/picturefill/\n * Copyright (c) 2016 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT\n */\n/*! Gecko-Picture - v1.0\n * https://github.com/scottjehl/picturefill/tree/3.0/src/plugins/gecko-picture\n * Firefox's early picture implementation (prior to FF41) is static and does\n * not react to viewport changes. This tiny module fixes this.\n */\n(function(window) {\n\t/*jshint eqnull:true */\n\tvar ua = navigator.userAgent;\n\n\tif ( window.HTMLPictureElement && ((/ecko/).test(ua) && ua.match(/rv\\:(\\d+)/) && RegExp.$1 < 45) ) {\n\t\taddEventListener(\"resize\", (function() {\n\t\t\tvar timer;\n\n\t\t\tvar dummySrc = document.createElement(\"source\");\n\n\t\t\tvar fixRespimg = function(img) {\n\t\t\t\tvar source, sizes;\n\t\t\t\tvar picture = img.parentNode;\n\n\t\t\t\tif (picture.nodeName.toUpperCase() === \"PICTURE\") {\n\t\t\t\t\tsource = dummySrc.cloneNode();\n\n\t\t\t\t\tpicture.insertBefore(source, picture.firstElementChild);\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tpicture.removeChild(source);\n\t\t\t\t\t});\n\t\t\t\t} else if (!img._pfLastSize || img.offsetWidth > img._pfLastSize) {\n\t\t\t\t\timg._pfLastSize = img.offsetWidth;\n\t\t\t\t\tsizes = img.sizes;\n\t\t\t\t\timg.sizes += \",100vw\";\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\timg.sizes = sizes;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar findPictureImgs = function() {\n\t\t\t\tvar i;\n\t\t\t\tvar imgs = document.querySelectorAll(\"picture > img, img[srcset][sizes]\");\n\t\t\t\tfor (i = 0; i < imgs.length; i++) {\n\t\t\t\t\tfixRespimg(imgs[i]);\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar onResize = function() {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = setTimeout(findPictureImgs, 99);\n\t\t\t};\n\t\t\tvar mq = window.matchMedia && matchMedia(\"(orientation: landscape)\");\n\t\t\tvar init = function() {\n\t\t\t\tonResize();\n\n\t\t\t\tif (mq && mq.addListener) {\n\t\t\t\t\tmq.addListener(onResize);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdummySrc.srcset = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\n\t\t\tif (/^[c|i]|d$/.test(document.readyState || \"\")) {\n\t\t\t\tinit();\n\t\t\t} else {\n\t\t\t\tdocument.addEventListener(\"DOMContentLoaded\", init);\n\t\t\t}\n\n\t\t\treturn onResize;\n\t\t})());\n\t}\n})(window);\n\n/*! Picturefill - v3.0.2\n * http://scottjehl.github.io/picturefill\n * Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt;\n *  License: MIT\n */\n\n(function( window, document, undefined ) {\n\t// Enable strict mode\n\t\"use strict\";\n\n\t// HTML shim|v it for old IE (IE9 will still need the HTML video tag workaround)\n\tdocument.createElement( \"picture\" );\n\n\tvar warn, eminpx, alwaysCheckWDescriptor, evalId;\n\t// local object for method references and testing exposure\n\tvar pf = {};\n\tvar isSupportTestReady = false;\n\tvar noop = function() {};\n\tvar image = document.createElement( \"img\" );\n\tvar getImgAttr = image.getAttribute;\n\tvar setImgAttr = image.setAttribute;\n\tvar removeImgAttr = image.removeAttribute;\n\tvar docElem = document.documentElement;\n\tvar types = {};\n\tvar cfg = {\n\t\t//resource selection:\n\t\talgorithm: \"\"\n\t};\n\tvar srcAttr = \"data-pfsrc\";\n\tvar srcsetAttr = srcAttr + \"set\";\n\t// ua sniffing is done for undetectable img loading features,\n\t// to do some non crucial perf optimizations\n\tvar ua = navigator.userAgent;\n\tvar supportAbort = (/rident/).test(ua) || ((/ecko/).test(ua) && ua.match(/rv\\:(\\d+)/) && RegExp.$1 > 35 );\n\tvar curSrcProp = \"currentSrc\";\n\tvar regWDesc = /\\s+\\+?\\d+(e\\d+)?w/;\n\tvar regSize = /(\\([^)]+\\))?\\s*(.+)/;\n\tvar setOptions = window.picturefillCFG;\n\t/**\n\t * Shortcut property for https://w3c.github.io/webappsec/specs/mixedcontent/#restricts-mixed-content ( for easy overriding in tests )\n\t */\n\t// baseStyle also used by getEmValue (i.e.: width: 1em is important)\n\tvar baseStyle = \"position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)\";\n\tvar fsCss = \"font-size:100%!important;\";\n\tvar isVwDirty = true;\n\n\tvar cssCache = {};\n\tvar sizeLengthCache = {};\n\tvar DPR = window.devicePixelRatio;\n\tvar units = {\n\t\tpx: 1,\n\t\t\"in\": 96\n\t};\n\tvar anchor = document.createElement( \"a\" );\n\t/**\n\t * alreadyRun flag used for setOptions. is it true setOptions will reevaluate\n\t * @type {boolean}\n\t */\n\tvar alreadyRun = false;\n\n\t// Reusable, non-\"g\" Regexes\n\n\t// (Don't use \\s, to avoid matching non-breaking space.)\n\tvar regexLeadingSpaces = /^[ \\t\\n\\r\\u000c]+/,\n\t    regexLeadingCommasOrSpaces = /^[, \\t\\n\\r\\u000c]+/,\n\t    regexLeadingNotSpaces = /^[^ \\t\\n\\r\\u000c]+/,\n\t    regexTrailingCommas = /[,]+$/,\n\t    regexNonNegativeInteger = /^\\d+$/,\n\n\t    // ( Positive or negative or unsigned integers or decimals, without or without exponents.\n\t    // Must include at least one digit.\n\t    // According to spec tests any decimal point must be followed by a digit.\n\t    // No leading plus sign is allowed.)\n\t    // https://html.spec.whatwg.org/multipage/infrastructure.html#valid-floating-point-number\n\t    regexFloatingPoint = /^-?(?:[0-9]+|[0-9]*\\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/;\n\n\tvar on = function(obj, evt, fn, capture) {\n\t\tif ( obj.addEventListener ) {\n\t\t\tobj.addEventListener(evt, fn, capture || false);\n\t\t} else if ( obj.attachEvent ) {\n\t\t\tobj.attachEvent( \"on\" + evt, fn);\n\t\t}\n\t};\n\n\t/**\n\t * simple memoize function:\n\t */\n\n\tvar memoize = function(fn) {\n\t\tvar cache = {};\n\t\treturn function(input) {\n\t\t\tif ( !(input in cache) ) {\n\t\t\t\tcache[ input ] = fn(input);\n\t\t\t}\n\t\t\treturn cache[ input ];\n\t\t};\n\t};\n\n\t// UTILITY FUNCTIONS\n\n\t// Manual is faster than RegEx\n\t// http://jsperf.com/whitespace-character/5\n\tfunction isSpace(c) {\n\t\treturn (c === \"\\u0020\" || // space\n\t\t        c === \"\\u0009\" || // horizontal tab\n\t\t        c === \"\\u000A\" || // new line\n\t\t        c === \"\\u000C\" || // form feed\n\t\t        c === \"\\u000D\");  // carriage return\n\t}\n\n\t/**\n\t * gets a mediaquery and returns a boolean or gets a css length and returns a number\n\t * @param css mediaqueries or css length\n\t * @returns {boolean|number}\n\t *\n\t * based on: https://gist.github.com/jonathantneal/db4f77009b155f083738\n\t */\n\tvar evalCSS = (function() {\n\n\t\tvar regLength = /^([\\d\\.]+)(em|vw|px)$/;\n\t\tvar replace = function() {\n\t\t\tvar args = arguments, index = 0, string = args[0];\n\t\t\twhile (++index in args) {\n\t\t\t\tstring = string.replace(args[index], args[++index]);\n\t\t\t}\n\t\t\treturn string;\n\t\t};\n\n\t\tvar buildStr = memoize(function(css) {\n\n\t\t\treturn \"return \" + replace((css || \"\").toLowerCase(),\n\t\t\t\t// interpret `and`\n\t\t\t\t/\\band\\b/g, \"&&\",\n\n\t\t\t\t// interpret `,`\n\t\t\t\t/,/g, \"||\",\n\n\t\t\t\t// interpret `min-` as >=\n\t\t\t\t/min-([a-z-\\s]+):/g, \"e.$1>=\",\n\n\t\t\t\t// interpret `max-` as <=\n\t\t\t\t/max-([a-z-\\s]+):/g, \"e.$1<=\",\n\n\t\t\t\t//calc value\n\t\t\t\t/calc([^)]+)/g, \"($1)\",\n\n\t\t\t\t// interpret css values\n\t\t\t\t/(\\d+[\\.]*[\\d]*)([a-z]+)/g, \"($1 * e.$2)\",\n\t\t\t\t//make eval less evil\n\t\t\t\t/^(?!(e.[a-z]|[0-9\\.&=|><\\+\\-\\*\\(\\)\\/])).*/ig, \"\"\n\t\t\t) + \";\";\n\t\t});\n\n\t\treturn function(css, length) {\n\t\t\tvar parsedLength;\n\t\t\tif (!(css in cssCache)) {\n\t\t\t\tcssCache[css] = false;\n\t\t\t\tif (length && (parsedLength = css.match( regLength ))) {\n\t\t\t\t\tcssCache[css] = parsedLength[ 1 ] * units[parsedLength[ 2 ]];\n\t\t\t\t} else {\n\t\t\t\t\t/*jshint evil:true */\n\t\t\t\t\ttry{\n\t\t\t\t\t\tcssCache[css] = new Function(\"e\", buildStr(css))(units);\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t\t/*jshint evil:false */\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cssCache[css];\n\t\t};\n\t})();\n\n\tvar setResolution = function( candidate, sizesattr ) {\n\t\tif ( candidate.w ) { // h = means height: || descriptor.type === 'h' do not handle yet...\n\t\t\tcandidate.cWidth = pf.calcListLength( sizesattr || \"100vw\" );\n\t\t\tcandidate.res = candidate.w / candidate.cWidth ;\n\t\t} else {\n\t\t\tcandidate.res = candidate.d;\n\t\t}\n\t\treturn candidate;\n\t};\n\n\t/**\n\t *\n\t * @param opt\n\t */\n\tvar picturefill = function( opt ) {\n\n\t\tif (!isSupportTestReady) {return;}\n\n\t\tvar elements, i, plen;\n\n\t\tvar options = opt || {};\n\n\t\tif ( options.elements && options.elements.nodeType === 1 ) {\n\t\t\tif ( options.elements.nodeName.toUpperCase() === \"IMG\" ) {\n\t\t\t\toptions.elements =  [ options.elements ];\n\t\t\t} else {\n\t\t\t\toptions.context = options.elements;\n\t\t\t\toptions.elements =  null;\n\t\t\t}\n\t\t}\n\n\t\telements = options.elements || pf.qsa( (options.context || document), ( options.reevaluate || options.reselect ) ? pf.sel : pf.selShort );\n\n\t\tif ( (plen = elements.length) ) {\n\n\t\t\tpf.setupRun( options );\n\t\t\talreadyRun = true;\n\n\t\t\t// Loop through all elements\n\t\t\tfor ( i = 0; i < plen; i++ ) {\n\t\t\t\tpf.fillImg(elements[ i ], options);\n\t\t\t}\n\n\t\t\tpf.teardownRun( options );\n\t\t}\n\t};\n\n\t/**\n\t * outputs a warning for the developer\n\t * @param {message}\n\t * @type {Function}\n\t */\n\twarn = ( window.console && console.warn ) ?\n\t\tfunction( message ) {\n\t\t\tconsole.warn( message );\n\t\t} :\n\t\tnoop\n\t;\n\n\tif ( !(curSrcProp in image) ) {\n\t\tcurSrcProp = \"src\";\n\t}\n\n\t// Add support for standard mime types.\n\ttypes[ \"image/jpeg\" ] = true;\n\ttypes[ \"image/gif\" ] = true;\n\ttypes[ \"image/png\" ] = true;\n\n\tfunction detectTypeSupport( type, typeUri ) {\n\t\t// based on Modernizr's lossless img-webp test\n\t\t// note: asynchronous\n\t\tvar image = new window.Image();\n\t\timage.onerror = function() {\n\t\t\ttypes[ type ] = false;\n\t\t\tpicturefill();\n\t\t};\n\t\timage.onload = function() {\n\t\t\ttypes[ type ] = image.width === 1;\n\t\t\tpicturefill();\n\t\t};\n\t\timage.src = typeUri;\n\t\treturn \"pending\";\n\t}\n\n\t// test svg support\n\ttypes[ \"image/svg+xml\" ] = document.implementation.hasFeature( \"http://www.w3.org/TR/SVG11/feature#Image\", \"1.1\" );\n\n\t/**\n\t * updates the internal vW property with the current viewport width in px\n\t */\n\tfunction updateMetrics() {\n\n\t\tisVwDirty = false;\n\t\tDPR = window.devicePixelRatio;\n\t\tcssCache = {};\n\t\tsizeLengthCache = {};\n\n\t\tpf.DPR = DPR || 1;\n\n\t\tunits.width = Math.max(window.innerWidth || 0, docElem.clientWidth);\n\t\tunits.height = Math.max(window.innerHeight || 0, docElem.clientHeight);\n\n\t\tunits.vw = units.width / 100;\n\t\tunits.vh = units.height / 100;\n\n\t\tevalId = [ units.height, units.width, DPR ].join(\"-\");\n\n\t\tunits.em = pf.getEmValue();\n\t\tunits.rem = units.em;\n\t}\n\n\tfunction chooseLowRes( lowerValue, higherValue, dprValue, isCached ) {\n\t\tvar bonusFactor, tooMuch, bonus, meanDensity;\n\n\t\t//experimental\n\t\tif (cfg.algorithm === \"saveData\" ){\n\t\t\tif ( lowerValue > 2.7 ) {\n\t\t\t\tmeanDensity = dprValue + 1;\n\t\t\t} else {\n\t\t\t\ttooMuch = higherValue - dprValue;\n\t\t\t\tbonusFactor = Math.pow(lowerValue - 0.6, 1.5);\n\n\t\t\t\tbonus = tooMuch * bonusFactor;\n\n\t\t\t\tif (isCached) {\n\t\t\t\t\tbonus += 0.1 * bonusFactor;\n\t\t\t\t}\n\n\t\t\t\tmeanDensity = lowerValue + bonus;\n\t\t\t}\n\t\t} else {\n\t\t\tmeanDensity = (dprValue > 1) ?\n\t\t\t\tMath.sqrt(lowerValue * higherValue) :\n\t\t\t\tlowerValue;\n\t\t}\n\n\t\treturn meanDensity > dprValue;\n\t}\n\n\tfunction applyBestCandidate( img ) {\n\t\tvar srcSetCandidates;\n\t\tvar matchingSet = pf.getSet( img );\n\t\tvar evaluated = false;\n\t\tif ( matchingSet !== \"pending\" ) {\n\t\t\tevaluated = evalId;\n\t\t\tif ( matchingSet ) {\n\t\t\t\tsrcSetCandidates = pf.setRes( matchingSet );\n\t\t\t\tpf.applySetCandidate( srcSetCandidates, img );\n\t\t\t}\n\t\t}\n\t\timg[ pf.ns ].evaled = evaluated;\n\t}\n\n\tfunction ascendingSort( a, b ) {\n\t\treturn a.res - b.res;\n\t}\n\n\tfunction setSrcToCur( img, src, set ) {\n\t\tvar candidate;\n\t\tif ( !set && src ) {\n\t\t\tset = img[ pf.ns ].sets;\n\t\t\tset = set && set[set.length - 1];\n\t\t}\n\n\t\tcandidate = getCandidateForSrc(src, set);\n\n\t\tif ( candidate ) {\n\t\t\tsrc = pf.makeUrl(src);\n\t\t\timg[ pf.ns ].curSrc = src;\n\t\t\timg[ pf.ns ].curCan = candidate;\n\n\t\t\tif ( !candidate.res ) {\n\t\t\t\tsetResolution( candidate, candidate.set.sizes );\n\t\t\t}\n\t\t}\n\t\treturn candidate;\n\t}\n\n\tfunction getCandidateForSrc( src, set ) {\n\t\tvar i, candidate, candidates;\n\t\tif ( src && set ) {\n\t\t\tcandidates = pf.parseSet( set );\n\t\t\tsrc = pf.makeUrl(src);\n\t\t\tfor ( i = 0; i < candidates.length; i++ ) {\n\t\t\t\tif ( src === pf.makeUrl(candidates[ i ].url) ) {\n\t\t\t\t\tcandidate = candidates[ i ];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn candidate;\n\t}\n\n\tfunction getAllSourceElements( picture, candidates ) {\n\t\tvar i, len, source, srcset;\n\n\t\t// SPEC mismatch intended for size and perf:\n\t\t// actually only source elements preceding the img should be used\n\t\t// also note: don't use qsa here, because IE8 sometimes doesn't like source as the key part in a selector\n\t\tvar sources = picture.getElementsByTagName( \"source\" );\n\n\t\tfor ( i = 0, len = sources.length; i < len; i++ ) {\n\t\t\tsource = sources[ i ];\n\t\t\tsource[ pf.ns ] = true;\n\t\t\tsrcset = source.getAttribute( \"srcset\" );\n\n\t\t\t// if source does not have a srcset attribute, skip\n\t\t\tif ( srcset ) {\n\t\t\t\tcandidates.push( {\n\t\t\t\t\tsrcset: srcset,\n\t\t\t\t\tmedia: source.getAttribute( \"media\" ),\n\t\t\t\t\ttype: source.getAttribute( \"type\" ),\n\t\t\t\t\tsizes: source.getAttribute( \"sizes\" )\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Srcset Parser\n\t * By Alex Bell |  MIT License\n\t *\n\t * @returns Array [{url: _, d: _, w: _, h:_, set:_(????)}, ...]\n\t *\n\t * Based super duper closely on the reference algorithm at:\n\t * https://html.spec.whatwg.org/multipage/embedded-content.html#parse-a-srcset-attribute\n\t */\n\n\t// 1. Let input be the value passed to this algorithm.\n\t// (TO-DO : Explain what \"set\" argument is here. Maybe choose a more\n\t// descriptive & more searchable name.  Since passing the \"set\" in really has\n\t// nothing to do with parsing proper, I would prefer this assignment eventually\n\t// go in an external fn.)\n\tfunction parseSrcset(input, set) {\n\n\t\tfunction collectCharacters(regEx) {\n\t\t\tvar chars,\n\t\t\t    match = regEx.exec(input.substring(pos));\n\t\t\tif (match) {\n\t\t\t\tchars = match[ 0 ];\n\t\t\t\tpos += chars.length;\n\t\t\t\treturn chars;\n\t\t\t}\n\t\t}\n\n\t\tvar inputLength = input.length,\n\t\t    url,\n\t\t    descriptors,\n\t\t    currentDescriptor,\n\t\t    state,\n\t\t    c,\n\n\t\t    // 2. Let position be a pointer into input, initially pointing at the start\n\t\t    //    of the string.\n\t\t    pos = 0,\n\n\t\t    // 3. Let candidates be an initially empty source set.\n\t\t    candidates = [];\n\n\t\t/**\n\t\t* Adds descriptor properties to a candidate, pushes to the candidates array\n\t\t* @return undefined\n\t\t*/\n\t\t// (Declared outside of the while loop so that it's only created once.\n\t\t// (This fn is defined before it is used, in order to pass JSHINT.\n\t\t// Unfortunately this breaks the sequencing of the spec comments. :/ )\n\t\tfunction parseDescriptors() {\n\n\t\t\t// 9. Descriptor parser: Let error be no.\n\t\t\tvar pError = false,\n\n\t\t\t// 10. Let width be absent.\n\t\t\t// 11. Let density be absent.\n\t\t\t// 12. Let future-compat-h be absent. (We're implementing it now as h)\n\t\t\t    w, d, h, i,\n\t\t\t    candidate = {},\n\t\t\t    desc, lastChar, value, intVal, floatVal;\n\n\t\t\t// 13. For each descriptor in descriptors, run the appropriate set of steps\n\t\t\t// from the following list:\n\t\t\tfor (i = 0 ; i < descriptors.length; i++) {\n\t\t\t\tdesc = descriptors[ i ];\n\n\t\t\t\tlastChar = desc[ desc.length - 1 ];\n\t\t\t\tvalue = desc.substring(0, desc.length - 1);\n\t\t\t\tintVal = parseInt(value, 10);\n\t\t\t\tfloatVal = parseFloat(value);\n\n\t\t\t\t// If the descriptor consists of a valid non-negative integer followed by\n\t\t\t\t// a U+0077 LATIN SMALL LETTER W character\n\t\t\t\tif (regexNonNegativeInteger.test(value) && (lastChar === \"w\")) {\n\n\t\t\t\t\t// If width and density are not both absent, then let error be yes.\n\t\t\t\t\tif (w || d) {pError = true;}\n\n\t\t\t\t\t// Apply the rules for parsing non-negative integers to the descriptor.\n\t\t\t\t\t// If the result is zero, let error be yes.\n\t\t\t\t\t// Otherwise, let width be the result.\n\t\t\t\t\tif (intVal === 0) {pError = true;} else {w = intVal;}\n\n\t\t\t\t// If the descriptor consists of a valid floating-point number followed by\n\t\t\t\t// a U+0078 LATIN SMALL LETTER X character\n\t\t\t\t} else if (regexFloatingPoint.test(value) && (lastChar === \"x\")) {\n\n\t\t\t\t\t// If width, density and future-compat-h are not all absent, then let error\n\t\t\t\t\t// be yes.\n\t\t\t\t\tif (w || d || h) {pError = true;}\n\n\t\t\t\t\t// Apply the rules for parsing floating-point number values to the descriptor.\n\t\t\t\t\t// If the result is less than zero, let error be yes. Otherwise, let density\n\t\t\t\t\t// be the result.\n\t\t\t\t\tif (floatVal < 0) {pError = true;} else {d = floatVal;}\n\n\t\t\t\t// If the descriptor consists of a valid non-negative integer followed by\n\t\t\t\t// a U+0068 LATIN SMALL LETTER H character\n\t\t\t\t} else if (regexNonNegativeInteger.test(value) && (lastChar === \"h\")) {\n\n\t\t\t\t\t// If height and density are not both absent, then let error be yes.\n\t\t\t\t\tif (h || d) {pError = true;}\n\n\t\t\t\t\t// Apply the rules for parsing non-negative integers to the descriptor.\n\t\t\t\t\t// If the result is zero, let error be yes. Otherwise, let future-compat-h\n\t\t\t\t\t// be the result.\n\t\t\t\t\tif (intVal === 0) {pError = true;} else {h = intVal;}\n\n\t\t\t\t// Anything else, Let error be yes.\n\t\t\t\t} else {pError = true;}\n\t\t\t} // (close step 13 for loop)\n\n\t\t\t// 15. If error is still no, then append a new image source to candidates whose\n\t\t\t// URL is url, associated with a width width if not absent and a pixel\n\t\t\t// density density if not absent. Otherwise, there is a parse error.\n\t\t\tif (!pError) {\n\t\t\t\tcandidate.url = url;\n\n\t\t\t\tif (w) { candidate.w = w;}\n\t\t\t\tif (d) { candidate.d = d;}\n\t\t\t\tif (h) { candidate.h = h;}\n\t\t\t\tif (!h && !d && !w) {candidate.d = 1;}\n\t\t\t\tif (candidate.d === 1) {set.has1x = true;}\n\t\t\t\tcandidate.set = set;\n\n\t\t\t\tcandidates.push(candidate);\n\t\t\t}\n\t\t} // (close parseDescriptors fn)\n\n\t\t/**\n\t\t* Tokenizes descriptor properties prior to parsing\n\t\t* Returns undefined.\n\t\t* (Again, this fn is defined before it is used, in order to pass JSHINT.\n\t\t* Unfortunately this breaks the logical sequencing of the spec comments. :/ )\n\t\t*/\n\t\tfunction tokenize() {\n\n\t\t\t// 8.1. Descriptor tokeniser: Skip whitespace\n\t\t\tcollectCharacters(regexLeadingSpaces);\n\n\t\t\t// 8.2. Let current descriptor be the empty string.\n\t\t\tcurrentDescriptor = \"\";\n\n\t\t\t// 8.3. Let state be in descriptor.\n\t\t\tstate = \"in descriptor\";\n\n\t\t\twhile (true) {\n\n\t\t\t\t// 8.4. Let c be the character at position.\n\t\t\t\tc = input.charAt(pos);\n\n\t\t\t\t//  Do the following depending on the value of state.\n\t\t\t\t//  For the purpose of this step, \"EOF\" is a special character representing\n\t\t\t\t//  that position is past the end of input.\n\n\t\t\t\t// In descriptor\n\t\t\t\tif (state === \"in descriptor\") {\n\t\t\t\t\t// Do the following, depending on the value of c:\n\n\t\t\t\t  // Space character\n\t\t\t\t  // If current descriptor is not empty, append current descriptor to\n\t\t\t\t  // descriptors and let current descriptor be the empty string.\n\t\t\t\t  // Set state to after descriptor.\n\t\t\t\t\tif (isSpace(c)) {\n\t\t\t\t\t\tif (currentDescriptor) {\n\t\t\t\t\t\t\tdescriptors.push(currentDescriptor);\n\t\t\t\t\t\t\tcurrentDescriptor = \"\";\n\t\t\t\t\t\t\tstate = \"after descriptor\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// U+002C COMMA (,)\n\t\t\t\t\t// Advance position to the next character in input. If current descriptor\n\t\t\t\t\t// is not empty, append current descriptor to descriptors. Jump to the step\n\t\t\t\t\t// labeled descriptor parser.\n\t\t\t\t\t} else if (c === \",\") {\n\t\t\t\t\t\tpos += 1;\n\t\t\t\t\t\tif (currentDescriptor) {\n\t\t\t\t\t\t\tdescriptors.push(currentDescriptor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparseDescriptors();\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// U+0028 LEFT PARENTHESIS (()\n\t\t\t\t\t// Append c to current descriptor. Set state to in parens.\n\t\t\t\t\t} else if (c === \"\\u0028\") {\n\t\t\t\t\t\tcurrentDescriptor = currentDescriptor + c;\n\t\t\t\t\t\tstate = \"in parens\";\n\n\t\t\t\t\t// EOF\n\t\t\t\t\t// If current descriptor is not empty, append current descriptor to\n\t\t\t\t\t// descriptors. Jump to the step labeled descriptor parser.\n\t\t\t\t\t} else if (c === \"\") {\n\t\t\t\t\t\tif (currentDescriptor) {\n\t\t\t\t\t\t\tdescriptors.push(currentDescriptor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparseDescriptors();\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Anything else\n\t\t\t\t\t// Append c to current descriptor.\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentDescriptor = currentDescriptor + c;\n\t\t\t\t\t}\n\t\t\t\t// (end \"in descriptor\"\n\n\t\t\t\t// In parens\n\t\t\t\t} else if (state === \"in parens\") {\n\n\t\t\t\t\t// U+0029 RIGHT PARENTHESIS ())\n\t\t\t\t\t// Append c to current descriptor. Set state to in descriptor.\n\t\t\t\t\tif (c === \")\") {\n\t\t\t\t\t\tcurrentDescriptor = currentDescriptor + c;\n\t\t\t\t\t\tstate = \"in descriptor\";\n\n\t\t\t\t\t// EOF\n\t\t\t\t\t// Append current descriptor to descriptors. Jump to the step labeled\n\t\t\t\t\t// descriptor parser.\n\t\t\t\t\t} else if (c === \"\") {\n\t\t\t\t\t\tdescriptors.push(currentDescriptor);\n\t\t\t\t\t\tparseDescriptors();\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Anything else\n\t\t\t\t\t// Append c to current descriptor.\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentDescriptor = currentDescriptor + c;\n\t\t\t\t\t}\n\n\t\t\t\t// After descriptor\n\t\t\t\t} else if (state === \"after descriptor\") {\n\n\t\t\t\t\t// Do the following, depending on the value of c:\n\t\t\t\t\t// Space character: Stay in this state.\n\t\t\t\t\tif (isSpace(c)) {\n\n\t\t\t\t\t// EOF: Jump to the step labeled descriptor parser.\n\t\t\t\t\t} else if (c === \"\") {\n\t\t\t\t\t\tparseDescriptors();\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t// Anything else\n\t\t\t\t\t// Set state to in descriptor. Set position to the previous character in input.\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate = \"in descriptor\";\n\t\t\t\t\t\tpos -= 1;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Advance position to the next character in input.\n\t\t\t\tpos += 1;\n\n\t\t\t// Repeat this step.\n\t\t\t} // (close while true loop)\n\t\t}\n\n\t\t// 4. Splitting loop: Collect a sequence of characters that are space\n\t\t//    characters or U+002C COMMA characters. If any U+002C COMMA characters\n\t\t//    were collected, that is a parse error.\n\t\twhile (true) {\n\t\t\tcollectCharacters(regexLeadingCommasOrSpaces);\n\n\t\t\t// 5. If position is past the end of input, return candidates and abort these steps.\n\t\t\tif (pos >= inputLength) {\n\t\t\t\treturn candidates; // (we're done, this is the sole return path)\n\t\t\t}\n\n\t\t\t// 6. Collect a sequence of characters that are not space characters,\n\t\t\t//    and let that be url.\n\t\t\turl = collectCharacters(regexLeadingNotSpaces);\n\n\t\t\t// 7. Let descriptors be a new empty list.\n\t\t\tdescriptors = [];\n\n\t\t\t// 8. If url ends with a U+002C COMMA character (,), follow these substeps:\n\t\t\t//\t\t(1). Remove all trailing U+002C COMMA characters from url. If this removed\n\t\t\t//         more than one character, that is a parse error.\n\t\t\tif (url.slice(-1) === \",\") {\n\t\t\t\turl = url.replace(regexTrailingCommas, \"\");\n\t\t\t\t// (Jump ahead to step 9 to skip tokenization and just push the candidate).\n\t\t\t\tparseDescriptors();\n\n\t\t\t//\tOtherwise, follow these substeps:\n\t\t\t} else {\n\t\t\t\ttokenize();\n\t\t\t} // (close else of step 8)\n\n\t\t// 16. Return to the step labeled splitting loop.\n\t\t} // (Close of big while loop.)\n\t}\n\n\t/*\n\t * Sizes Parser\n\t *\n\t * By Alex Bell |  MIT License\n\t *\n\t * Non-strict but accurate and lightweight JS Parser for the string value <img sizes=\"here\">\n\t *\n\t * Reference algorithm at:\n\t * https://html.spec.whatwg.org/multipage/embedded-content.html#parse-a-sizes-attribute\n\t *\n\t * Most comments are copied in directly from the spec\n\t * (except for comments in parens).\n\t *\n\t * Grammar is:\n\t * <source-size-list> = <source-size># [ , <source-size-value> ]? | <source-size-value>\n\t * <source-size> = <media-condition> <source-size-value>\n\t * <source-size-value> = <length>\n\t * http://www.w3.org/html/wg/drafts/html/master/embedded-content.html#attr-img-sizes\n\t *\n\t * E.g. \"(max-width: 30em) 100vw, (max-width: 50em) 70vw, 100vw\"\n\t * or \"(min-width: 30em), calc(30vw - 15px)\" or just \"30vw\"\n\t *\n\t * Returns the first valid <css-length> with a media condition that evaluates to true,\n\t * or \"100vw\" if all valid media conditions evaluate to false.\n\t *\n\t */\n\n\tfunction parseSizes(strValue) {\n\n\t\t// (Percentage CSS lengths are not allowed in this case, to avoid confusion:\n\t\t// https://html.spec.whatwg.org/multipage/embedded-content.html#valid-source-size-list\n\t\t// CSS allows a single optional plus or minus sign:\n\t\t// http://www.w3.org/TR/CSS2/syndata.html#numbers\n\t\t// CSS is ASCII case-insensitive:\n\t\t// http://www.w3.org/TR/CSS2/syndata.html#characters )\n\t\t// Spec allows exponential notation for <number> type:\n\t\t// http://dev.w3.org/csswg/css-values/#numbers\n\t\tvar regexCssLengthWithUnits = /^(?:[+-]?[0-9]+|[0-9]*\\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i;\n\n\t\t// (This is a quick and lenient test. Because of optional unlimited-depth internal\n\t\t// grouping parens and strict spacing rules, this could get very complicated.)\n\t\tvar regexCssCalc = /^calc\\((?:[0-9a-z \\.\\+\\-\\*\\/\\(\\)]+)\\)$/i;\n\n\t\tvar i;\n\t\tvar unparsedSizesList;\n\t\tvar unparsedSizesListLength;\n\t\tvar unparsedSize;\n\t\tvar lastComponentValue;\n\t\tvar size;\n\n\t\t// UTILITY FUNCTIONS\n\n\t\t//  (Toy CSS parser. The goals here are:\n\t\t//  1) expansive test coverage without the weight of a full CSS parser.\n\t\t//  2) Avoiding regex wherever convenient.\n\t\t//  Quick tests: http://jsfiddle.net/gtntL4gr/3/\n\t\t//  Returns an array of arrays.)\n\t\tfunction parseComponentValues(str) {\n\t\t\tvar chrctr;\n\t\t\tvar component = \"\";\n\t\t\tvar componentArray = [];\n\t\t\tvar listArray = [];\n\t\t\tvar parenDepth = 0;\n\t\t\tvar pos = 0;\n\t\t\tvar inComment = false;\n\n\t\t\tfunction pushComponent() {\n\t\t\t\tif (component) {\n\t\t\t\t\tcomponentArray.push(component);\n\t\t\t\t\tcomponent = \"\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction pushComponentArray() {\n\t\t\t\tif (componentArray[0]) {\n\t\t\t\t\tlistArray.push(componentArray);\n\t\t\t\t\tcomponentArray = [];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// (Loop forwards from the beginning of the string.)\n\t\t\twhile (true) {\n\t\t\t\tchrctr = str.charAt(pos);\n\n\t\t\t\tif (chrctr === \"\") { // ( End of string reached.)\n\t\t\t\t\tpushComponent();\n\t\t\t\t\tpushComponentArray();\n\t\t\t\t\treturn listArray;\n\t\t\t\t} else if (inComment) {\n\t\t\t\t\tif ((chrctr === \"*\") && (str[pos + 1] === \"/\")) { // (At end of a comment.)\n\t\t\t\t\t\tinComment = false;\n\t\t\t\t\t\tpos += 2;\n\t\t\t\t\t\tpushComponent();\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpos += 1; // (Skip all characters inside comments.)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else if (isSpace(chrctr)) {\n\t\t\t\t\t// (If previous character in loop was also a space, or if\n\t\t\t\t\t// at the beginning of the string, do not add space char to\n\t\t\t\t\t// component.)\n\t\t\t\t\tif ( (str.charAt(pos - 1) && isSpace( str.charAt(pos - 1) ) ) || !component ) {\n\t\t\t\t\t\tpos += 1;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (parenDepth === 0) {\n\t\t\t\t\t\tpushComponent();\n\t\t\t\t\t\tpos +=1;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// (Replace any space character with a plain space for legibility.)\n\t\t\t\t\t\tchrctr = \" \";\n\t\t\t\t\t}\n\t\t\t\t} else if (chrctr === \"(\") {\n\t\t\t\t\tparenDepth += 1;\n\t\t\t\t} else if (chrctr === \")\") {\n\t\t\t\t\tparenDepth -= 1;\n\t\t\t\t} else if (chrctr === \",\") {\n\t\t\t\t\tpushComponent();\n\t\t\t\t\tpushComponentArray();\n\t\t\t\t\tpos += 1;\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if ( (chrctr === \"/\") && (str.charAt(pos + 1) === \"*\") ) {\n\t\t\t\t\tinComment = true;\n\t\t\t\t\tpos += 2;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcomponent = component + chrctr;\n\t\t\t\tpos += 1;\n\t\t\t}\n\t\t}\n\n\t\tfunction isValidNonNegativeSourceSizeValue(s) {\n\t\t\tif (regexCssLengthWithUnits.test(s) && (parseFloat(s) >= 0)) {return true;}\n\t\t\tif (regexCssCalc.test(s)) {return true;}\n\t\t\t// ( http://www.w3.org/TR/CSS2/syndata.html#numbers says:\n\t\t\t// \"-0 is equivalent to 0 and is not a negative number.\" which means that\n\t\t\t// unitless zero and unitless negative zero must be accepted as special cases.)\n\t\t\tif ((s === \"0\") || (s === \"-0\") || (s === \"+0\")) {return true;}\n\t\t\treturn false;\n\t\t}\n\n\t\t// When asked to parse a sizes attribute from an element, parse a\n\t\t// comma-separated list of component values from the value of the element's\n\t\t// sizes attribute (or the empty string, if the attribute is absent), and let\n\t\t// unparsed sizes list be the result.\n\t\t// http://dev.w3.org/csswg/css-syntax/#parse-comma-separated-list-of-component-values\n\n\t\tunparsedSizesList = parseComponentValues(strValue);\n\t\tunparsedSizesListLength = unparsedSizesList.length;\n\n\t\t// For each unparsed size in unparsed sizes list:\n\t\tfor (i = 0; i < unparsedSizesListLength; i++) {\n\t\t\tunparsedSize = unparsedSizesList[i];\n\n\t\t\t// 1. Remove all consecutive <whitespace-token>s from the end of unparsed size.\n\t\t\t// ( parseComponentValues() already omits spaces outside of parens. )\n\n\t\t\t// If unparsed size is now empty, that is a parse error; continue to the next\n\t\t\t// iteration of this algorithm.\n\t\t\t// ( parseComponentValues() won't push an empty array. )\n\n\t\t\t// 2. If the last component value in unparsed size is a valid non-negative\n\t\t\t// <source-size-value>, let size be its value and remove the component value\n\t\t\t// from unparsed size. Any CSS function other than the calc() function is\n\t\t\t// invalid. Otherwise, there is a parse error; continue to the next iteration\n\t\t\t// of this algorithm.\n\t\t\t// http://dev.w3.org/csswg/css-syntax/#parse-component-value\n\t\t\tlastComponentValue = unparsedSize[unparsedSize.length - 1];\n\n\t\t\tif (isValidNonNegativeSourceSizeValue(lastComponentValue)) {\n\t\t\t\tsize = lastComponentValue;\n\t\t\t\tunparsedSize.pop();\n\t\t\t} else {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// 3. Remove all consecutive <whitespace-token>s from the end of unparsed\n\t\t\t// size. If unparsed size is now empty, return size and exit this algorithm.\n\t\t\t// If this was not the last item in unparsed sizes list, that is a parse error.\n\t\t\tif (unparsedSize.length === 0) {\n\t\t\t\treturn size;\n\t\t\t}\n\n\t\t\t// 4. Parse the remaining component values in unparsed size as a\n\t\t\t// <media-condition>. If it does not parse correctly, or it does parse\n\t\t\t// correctly but the <media-condition> evaluates to false, continue to the\n\t\t\t// next iteration of this algorithm.\n\t\t\t// (Parsing all possible compound media conditions in JS is heavy, complicated,\n\t\t\t// and the payoff is unclear. Is there ever an situation where the\n\t\t\t// media condition parses incorrectly but still somehow evaluates to true?\n\t\t\t// Can we just rely on the browser/polyfill to do it?)\n\t\t\tunparsedSize = unparsedSize.join(\" \");\n\t\t\tif (!(pf.matchesMedia( unparsedSize ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// 5. Return size and exit this algorithm.\n\t\t\treturn size;\n\t\t}\n\n\t\t// If the above algorithm exhausts unparsed sizes list without returning a\n\t\t// size value, return 100vw.\n\t\treturn \"100vw\";\n\t}\n\n\t// namespace\n\tpf.ns = (\"pf\" + new Date().getTime()).substr(0, 9);\n\n\t// srcset support test\n\tpf.supSrcset = \"srcset\" in image;\n\tpf.supSizes = \"sizes\" in image;\n\tpf.supPicture = !!window.HTMLPictureElement;\n\n\t// UC browser does claim to support srcset and picture, but not sizes,\n\t// this extended test reveals the browser does support nothing\n\tif (pf.supSrcset && pf.supPicture && !pf.supSizes) {\n\t\t(function(image2) {\n\t\t\timage.srcset = \"data:,a\";\n\t\t\timage2.src = \"data:,a\";\n\t\t\tpf.supSrcset = image.complete === image2.complete;\n\t\t\tpf.supPicture = pf.supSrcset && pf.supPicture;\n\t\t})(document.createElement(\"img\"));\n\t}\n\n\t// Safari9 has basic support for sizes, but does't expose the `sizes` idl attribute\n\tif (pf.supSrcset && !pf.supSizes) {\n\n\t\t(function() {\n\t\t\tvar width2 = \"data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==\";\n\t\t\tvar width1 = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\tvar test = function() {\n\t\t\t\tvar width = img.width;\n\n\t\t\t\tif (width === 2) {\n\t\t\t\t\tpf.supSizes = true;\n\t\t\t\t}\n\n\t\t\t\talwaysCheckWDescriptor = pf.supSrcset && !pf.supSizes;\n\n\t\t\t\tisSupportTestReady = true;\n\t\t\t\t// force async\n\t\t\t\tsetTimeout(picturefill);\n\t\t\t};\n\n\t\t\timg.onload = test;\n\t\t\timg.onerror = test;\n\t\t\timg.setAttribute(\"sizes\", \"9px\");\n\n\t\t\timg.srcset = width1 + \" 1w,\" + width2 + \" 9w\";\n\t\t\timg.src = width1;\n\t\t})();\n\n\t} else {\n\t\tisSupportTestReady = true;\n\t}\n\n\t// using pf.qsa instead of dom traversing does scale much better,\n\t// especially on sites mixing responsive and non-responsive images\n\tpf.selShort = \"picture>img,img[srcset]\";\n\tpf.sel = pf.selShort;\n\tpf.cfg = cfg;\n\n\t/**\n\t * Shortcut property for `devicePixelRatio` ( for easy overriding in tests )\n\t */\n\tpf.DPR = (DPR  || 1 );\n\tpf.u = units;\n\n\t// container of supported mime types that one might need to qualify before using\n\tpf.types =  types;\n\n\tpf.setSize = noop;\n\n\t/**\n\t * Gets a string and returns the absolute URL\n\t * @param src\n\t * @returns {String} absolute URL\n\t */\n\n\tpf.makeUrl = memoize(function(src) {\n\t\tanchor.href = src;\n\t\treturn anchor.href;\n\t});\n\n\t/**\n\t * Gets a DOM element or document and a selctor and returns the found matches\n\t * Can be extended with jQuery/Sizzle for IE7 support\n\t * @param context\n\t * @param sel\n\t * @returns {NodeList|Array}\n\t */\n\tpf.qsa = function(context, sel) {\n\t\treturn ( \"querySelector\" in context ) ? context.querySelectorAll(sel) : [];\n\t};\n\n\t/**\n\t * Shortcut method for matchMedia ( for easy overriding in tests )\n\t * wether native or pf.mMQ is used will be decided lazy on first call\n\t * @returns {boolean}\n\t */\n\tpf.matchesMedia = function() {\n\t\tif ( window.matchMedia && (matchMedia( \"(min-width: 0.1em)\" ) || {}).matches ) {\n\t\t\tpf.matchesMedia = function( media ) {\n\t\t\t\treturn !media || ( matchMedia( media ).matches );\n\t\t\t};\n\t\t} else {\n\t\t\tpf.matchesMedia = pf.mMQ;\n\t\t}\n\n\t\treturn pf.matchesMedia.apply( this, arguments );\n\t};\n\n\t/**\n\t * A simplified matchMedia implementation for IE8 and IE9\n\t * handles only min-width/max-width with px or em values\n\t * @param media\n\t * @returns {boolean}\n\t */\n\tpf.mMQ = function( media ) {\n\t\treturn media ? evalCSS(media) : true;\n\t};\n\n\t/**\n\t * Returns the calculated length in css pixel from the given sourceSizeValue\n\t * http://dev.w3.org/csswg/css-values-3/#length-value\n\t * intended Spec mismatches:\n\t * * Does not check for invalid use of CSS functions\n\t * * Does handle a computed length of 0 the same as a negative and therefore invalid value\n\t * @param sourceSizeValue\n\t * @returns {Number}\n\t */\n\tpf.calcLength = function( sourceSizeValue ) {\n\n\t\tvar value = evalCSS(sourceSizeValue, true) || false;\n\t\tif (value < 0) {\n\t\t\tvalue = false;\n\t\t}\n\n\t\treturn value;\n\t};\n\n\t/**\n\t * Takes a type string and checks if its supported\n\t */\n\n\tpf.supportsType = function( type ) {\n\t\treturn ( type ) ? types[ type ] : true;\n\t};\n\n\t/**\n\t * Parses a sourceSize into mediaCondition (media) and sourceSizeValue (length)\n\t * @param sourceSizeStr\n\t * @returns {*}\n\t */\n\tpf.parseSize = memoize(function( sourceSizeStr ) {\n\t\tvar match = ( sourceSizeStr || \"\" ).match(regSize);\n\t\treturn {\n\t\t\tmedia: match && match[1],\n\t\t\tlength: match && match[2]\n\t\t};\n\t});\n\n\tpf.parseSet = function( set ) {\n\t\tif ( !set.cands ) {\n\t\t\tset.cands = parseSrcset(set.srcset, set);\n\t\t}\n\t\treturn set.cands;\n\t};\n\n\t/**\n\t * returns 1em in css px for html/body default size\n\t * function taken from respondjs\n\t * @returns {*|number}\n\t */\n\tpf.getEmValue = function() {\n\t\tvar body;\n\t\tif ( !eminpx && (body = document.body) ) {\n\t\t\tvar div = document.createElement( \"div\" ),\n\t\t\t\toriginalHTMLCSS = docElem.style.cssText,\n\t\t\t\toriginalBodyCSS = body.style.cssText;\n\n\t\t\tdiv.style.cssText = baseStyle;\n\n\t\t\t// 1em in a media query is the value of the default font size of the browser\n\t\t\t// reset docElem and body to ensure the correct value is returned\n\t\t\tdocElem.style.cssText = fsCss;\n\t\t\tbody.style.cssText = fsCss;\n\n\t\t\tbody.appendChild( div );\n\t\t\teminpx = div.offsetWidth;\n\t\t\tbody.removeChild( div );\n\n\t\t\t//also update eminpx before returning\n\t\t\teminpx = parseFloat( eminpx, 10 );\n\n\t\t\t// restore the original values\n\t\t\tdocElem.style.cssText = originalHTMLCSS;\n\t\t\tbody.style.cssText = originalBodyCSS;\n\n\t\t}\n\t\treturn eminpx || 16;\n\t};\n\n\t/**\n\t * Takes a string of sizes and returns the width in pixels as a number\n\t */\n\tpf.calcListLength = function( sourceSizeListStr ) {\n\t\t// Split up source size list, ie ( max-width: 30em ) 100%, ( max-width: 50em ) 50%, 33%\n\t\t//\n\t\t//                           or (min-width:30em) calc(30% - 15px)\n\t\tif ( !(sourceSizeListStr in sizeLengthCache) || cfg.uT ) {\n\t\t\tvar winningLength = pf.calcLength( parseSizes( sourceSizeListStr ) );\n\n\t\t\tsizeLengthCache[ sourceSizeListStr ] = !winningLength ? units.width : winningLength;\n\t\t}\n\n\t\treturn sizeLengthCache[ sourceSizeListStr ];\n\t};\n\n\t/**\n\t * Takes a candidate object with a srcset property in the form of url/\n\t * ex. \"images/pic-medium.png 1x, images/pic-medium-2x.png 2x\" or\n\t *     \"images/pic-medium.png 400w, images/pic-medium-2x.png 800w\" or\n\t *     \"images/pic-small.png\"\n\t * Get an array of image candidates in the form of\n\t *      {url: \"/foo/bar.png\", resolution: 1}\n\t * where resolution is http://dev.w3.org/csswg/css-values-3/#resolution-value\n\t * If sizes is specified, res is calculated\n\t */\n\tpf.setRes = function( set ) {\n\t\tvar candidates;\n\t\tif ( set ) {\n\n\t\t\tcandidates = pf.parseSet( set );\n\n\t\t\tfor ( var i = 0, len = candidates.length; i < len; i++ ) {\n\t\t\t\tsetResolution( candidates[ i ], set.sizes );\n\t\t\t}\n\t\t}\n\t\treturn candidates;\n\t};\n\n\tpf.setRes.res = setResolution;\n\n\tpf.applySetCandidate = function( candidates, img ) {\n\t\tif ( !candidates.length ) {return;}\n\t\tvar candidate,\n\t\t\ti,\n\t\t\tj,\n\t\t\tlength,\n\t\t\tbestCandidate,\n\t\t\tcurSrc,\n\t\t\tcurCan,\n\t\t\tcandidateSrc,\n\t\t\tabortCurSrc;\n\n\t\tvar imageData = img[ pf.ns ];\n\t\tvar dpr = pf.DPR;\n\n\t\tcurSrc = imageData.curSrc || img[curSrcProp];\n\n\t\tcurCan = imageData.curCan || setSrcToCur(img, curSrc, candidates[0].set);\n\n\t\t// if we have a current source, we might either become lazy or give this source some advantage\n\t\tif ( curCan && curCan.set === candidates[ 0 ].set ) {\n\n\t\t\t// if browser can abort image request and the image has a higher pixel density than needed\n\t\t\t// and this image isn't downloaded yet, we skip next part and try to save bandwidth\n\t\t\tabortCurSrc = (supportAbort && !img.complete && curCan.res - 0.1 > dpr);\n\n\t\t\tif ( !abortCurSrc ) {\n\t\t\t\tcurCan.cached = true;\n\n\t\t\t\t// if current candidate is \"best\", \"better\" or \"okay\",\n\t\t\t\t// set it to bestCandidate\n\t\t\t\tif ( curCan.res >= dpr ) {\n\t\t\t\t\tbestCandidate = curCan;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( !bestCandidate ) {\n\n\t\t\tcandidates.sort( ascendingSort );\n\n\t\t\tlength = candidates.length;\n\t\t\tbestCandidate = candidates[ length - 1 ];\n\n\t\t\tfor ( i = 0; i < length; i++ ) {\n\t\t\t\tcandidate = candidates[ i ];\n\t\t\t\tif ( candidate.res >= dpr ) {\n\t\t\t\t\tj = i - 1;\n\n\t\t\t\t\t// we have found the perfect candidate,\n\t\t\t\t\t// but let's improve this a little bit with some assumptions ;-)\n\t\t\t\t\tif (candidates[ j ] &&\n\t\t\t\t\t\t(abortCurSrc || curSrc !== pf.makeUrl( candidate.url )) &&\n\t\t\t\t\t\tchooseLowRes(candidates[ j ].res, candidate.res, dpr, candidates[ j ].cached)) {\n\n\t\t\t\t\t\tbestCandidate = candidates[ j ];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbestCandidate = candidate;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( bestCandidate ) {\n\n\t\t\tcandidateSrc = pf.makeUrl( bestCandidate.url );\n\n\t\t\timageData.curSrc = candidateSrc;\n\t\t\timageData.curCan = bestCandidate;\n\n\t\t\tif ( candidateSrc !== curSrc ) {\n\t\t\t\tpf.setSrc( img, bestCandidate );\n\t\t\t}\n\t\t\tpf.setSize( img );\n\t\t}\n\t};\n\n\tpf.setSrc = function( img, bestCandidate ) {\n\t\tvar origWidth;\n\t\timg.src = bestCandidate.url;\n\n\t\t// although this is a specific Safari issue, we don't want to take too much different code paths\n\t\tif ( bestCandidate.set.type === \"image/svg+xml\" ) {\n\t\t\torigWidth = img.style.width;\n\t\t\timg.style.width = (img.offsetWidth + 1) + \"px\";\n\n\t\t\t// next line only should trigger a repaint\n\t\t\t// if... is only done to trick dead code removal\n\t\t\tif ( img.offsetWidth + 1 ) {\n\t\t\t\timg.style.width = origWidth;\n\t\t\t}\n\t\t}\n\t};\n\n\tpf.getSet = function( img ) {\n\t\tvar i, set, supportsType;\n\t\tvar match = false;\n\t\tvar sets = img [ pf.ns ].sets;\n\n\t\tfor ( i = 0; i < sets.length && !match; i++ ) {\n\t\t\tset = sets[i];\n\n\t\t\tif ( !set.srcset || !pf.matchesMedia( set.media ) || !(supportsType = pf.supportsType( set.type )) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( supportsType === \"pending\" ) {\n\t\t\t\tset = supportsType;\n\t\t\t}\n\n\t\t\tmatch = set;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn match;\n\t};\n\n\tpf.parseSets = function( element, parent, options ) {\n\t\tvar srcsetAttribute, imageSet, isWDescripor, srcsetParsed;\n\n\t\tvar hasPicture = parent && parent.nodeName.toUpperCase() === \"PICTURE\";\n\t\tvar imageData = element[ pf.ns ];\n\n\t\tif ( imageData.src === undefined || options.src ) {\n\t\t\timageData.src = getImgAttr.call( element, \"src\" );\n\t\t\tif ( imageData.src ) {\n\t\t\t\tsetImgAttr.call( element, srcAttr, imageData.src );\n\t\t\t} else {\n\t\t\t\tremoveImgAttr.call( element, srcAttr );\n\t\t\t}\n\t\t}\n\n\t\tif ( imageData.srcset === undefined || options.srcset || !pf.supSrcset || element.srcset ) {\n\t\t\tsrcsetAttribute = getImgAttr.call( element, \"srcset\" );\n\t\t\timageData.srcset = srcsetAttribute;\n\t\t\tsrcsetParsed = true;\n\t\t}\n\n\t\timageData.sets = [];\n\n\t\tif ( hasPicture ) {\n\t\t\timageData.pic = true;\n\t\t\tgetAllSourceElements( parent, imageData.sets );\n\t\t}\n\n\t\tif ( imageData.srcset ) {\n\t\t\timageSet = {\n\t\t\t\tsrcset: imageData.srcset,\n\t\t\t\tsizes: getImgAttr.call( element, \"sizes\" )\n\t\t\t};\n\n\t\t\timageData.sets.push( imageSet );\n\n\t\t\tisWDescripor = (alwaysCheckWDescriptor || imageData.src) && regWDesc.test(imageData.srcset || \"\");\n\n\t\t\t// add normal src as candidate, if source has no w descriptor\n\t\t\tif ( !isWDescripor && imageData.src && !getCandidateForSrc(imageData.src, imageSet) && !imageSet.has1x ) {\n\t\t\t\timageSet.srcset += \", \" + imageData.src;\n\t\t\t\timageSet.cands.push({\n\t\t\t\t\turl: imageData.src,\n\t\t\t\t\td: 1,\n\t\t\t\t\tset: imageSet\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else if ( imageData.src ) {\n\t\t\timageData.sets.push( {\n\t\t\t\tsrcset: imageData.src,\n\t\t\t\tsizes: null\n\t\t\t} );\n\t\t}\n\n\t\timageData.curCan = null;\n\t\timageData.curSrc = undefined;\n\n\t\t// if img has picture or the srcset was removed or has a srcset and does not support srcset at all\n\t\t// or has a w descriptor (and does not support sizes) set support to false to evaluate\n\t\timageData.supported = !( hasPicture || ( imageSet && !pf.supSrcset ) || (isWDescripor && !pf.supSizes) );\n\n\t\tif ( srcsetParsed && pf.supSrcset && !imageData.supported ) {\n\t\t\tif ( srcsetAttribute ) {\n\t\t\t\tsetImgAttr.call( element, srcsetAttr, srcsetAttribute );\n\t\t\t\telement.srcset = \"\";\n\t\t\t} else {\n\t\t\t\tremoveImgAttr.call( element, srcsetAttr );\n\t\t\t}\n\t\t}\n\n\t\tif (imageData.supported && !imageData.srcset && ((!imageData.src && element.src) ||  element.src !== pf.makeUrl(imageData.src))) {\n\t\t\tif (imageData.src === null) {\n\t\t\t\telement.removeAttribute(\"src\");\n\t\t\t} else {\n\t\t\t\telement.src = imageData.src;\n\t\t\t}\n\t\t}\n\n\t\timageData.parsed = true;\n\t};\n\n\tpf.fillImg = function(element, options) {\n\t\tvar imageData;\n\t\tvar extreme = options.reselect || options.reevaluate;\n\n\t\t// expando for caching data on the img\n\t\tif ( !element[ pf.ns ] ) {\n\t\t\telement[ pf.ns ] = {};\n\t\t}\n\n\t\timageData = element[ pf.ns ];\n\n\t\t// if the element has already been evaluated, skip it\n\t\t// unless `options.reevaluate` is set to true ( this, for example,\n\t\t// is set to true when running `picturefill` on `resize` ).\n\t\tif ( !extreme && imageData.evaled === evalId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !imageData.parsed || options.reevaluate ) {\n\t\t\tpf.parseSets( element, element.parentNode, options );\n\t\t}\n\n\t\tif ( !imageData.supported ) {\n\t\t\tapplyBestCandidate( element );\n\t\t} else {\n\t\t\timageData.evaled = evalId;\n\t\t}\n\t};\n\n\tpf.setupRun = function() {\n\t\tif ( !alreadyRun || isVwDirty || (DPR !== window.devicePixelRatio) ) {\n\t\t\tupdateMetrics();\n\t\t}\n\t};\n\n\t// If picture is supported, well, that's awesome.\n\tif ( pf.supPicture ) {\n\t\tpicturefill = noop;\n\t\tpf.fillImg = noop;\n\t} else {\n\n\t\t // Set up picture polyfill by polling the document\n\t\t(function() {\n\t\t\tvar isDomReady;\n\t\t\tvar regReady = window.attachEvent ? /d$|^c/ : /d$|^c|^i/;\n\n\t\t\tvar run = function() {\n\t\t\t\tvar readyState = document.readyState || \"\";\n\n\t\t\t\ttimerId = setTimeout(run, readyState === \"loading\" ? 200 :  999);\n\t\t\t\tif ( document.body ) {\n\t\t\t\t\tpf.fillImgs();\n\t\t\t\t\tisDomReady = isDomReady || regReady.test(readyState);\n\t\t\t\t\tif ( isDomReady ) {\n\t\t\t\t\t\tclearTimeout( timerId );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar timerId = setTimeout(run, document.body ? 9 : 99);\n\n\t\t\t// Also attach picturefill on resize and readystatechange\n\t\t\t// http://modernjavascript.blogspot.com/2013/08/building-better-debounce.html\n\t\t\tvar debounce = function(func, wait) {\n\t\t\t\tvar timeout, timestamp;\n\t\t\t\tvar later = function() {\n\t\t\t\t\tvar last = (new Date()) - timestamp;\n\n\t\t\t\t\tif (last < wait) {\n\t\t\t\t\t\ttimeout = setTimeout(later, wait - last);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimeout = null;\n\t\t\t\t\t\tfunc();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\treturn function() {\n\t\t\t\t\ttimestamp = new Date();\n\n\t\t\t\t\tif (!timeout) {\n\t\t\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t\tvar lastClientWidth = docElem.clientHeight;\n\t\t\tvar onResize = function() {\n\t\t\t\tisVwDirty = Math.max(window.innerWidth || 0, docElem.clientWidth) !== units.width || docElem.clientHeight !== lastClientWidth;\n\t\t\t\tlastClientWidth = docElem.clientHeight;\n\t\t\t\tif ( isVwDirty ) {\n\t\t\t\t\tpf.fillImgs();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ton( window, \"resize\", debounce(onResize, 99 ) );\n\t\t\ton( document, \"readystatechange\", run );\n\t\t})();\n\t}\n\n\tpf.picturefill = picturefill;\n\t//use this internally for easy monkey patching/performance testing\n\tpf.fillImgs = picturefill;\n\tpf.teardownRun = noop;\n\n\t/* expose methods for testing */\n\tpicturefill._ = pf;\n\n\twindow.picturefillCFG = {\n\t\tpf: pf,\n\t\tpush: function(args) {\n\t\t\tvar name = args.shift();\n\t\t\tif (typeof pf[name] === \"function\") {\n\t\t\t\tpf[name].apply(pf, args);\n\t\t\t} else {\n\t\t\t\tcfg[name] = args[0];\n\t\t\t\tif (alreadyRun) {\n\t\t\t\t\tpf.fillImgs( { reselect: true } );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\twhile (setOptions && setOptions.length) {\n\t\twindow.picturefillCFG.push(setOptions.shift());\n\t}\n\n\t/* expose picturefill */\n\twindow.picturefill = picturefill;\n\n\t/* expose picturefill */\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\t\t// CommonJS, just export\n\t\tmodule.exports = picturefill;\n\t} else if ( typeof define === \"function\" && define.amd ) {\n\t\t// AMD support\n\t\tdefine( \"picturefill\", function() { return picturefill; } );\n\t}\n\n\t// IE8 evals this sync, so it must be the last thing we do\n\tif ( !pf.supPicture ) {\n\t\ttypes[ \"image/webp\" ] = detectTypeSupport(\"image/webp\", \"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==\" );\n\t}\n\n} )( window, document );","/*!\nCopyright 2014 Adobe Systems Inc.;\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\nhttp://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\n;(function(scope) {\n  \"use strict\";\n\n  function Metrics(element) {\n      var computedStyle = getComputedStyle(element);\n\n      // a full units map would call getUnitsMap, but that can significantly slow things down\n      this.units = { px: 1 };\n      this.element = element;\n\n      // Used values already in px, but may be \"\" in some browsers, eg FF\n      // These values are stored in their CSS order top, right, bottom, left\n      var parseLength = function(length) { return length && length.length ? parseInt(length) : 0; };\n      this.margins = [computedStyle.marginTop, computedStyle.marginRight, computedStyle.marginBottom, computedStyle.marginLeft];\n      this.margins = this.margins.map(parseLength);\n      this.borders = [computedStyle.borderTopWidth, computedStyle.borderRightWidth, computedStyle.borderBottomWidth, computedStyle.borderLeftWidth];\n      this.borders = this.borders.map(parseLength);\n      this.paddings = [computedStyle.paddingTop, computedStyle.paddingRight, computedStyle.paddingBottom, computedStyle.paddingLeft];\n      this.paddings = this.paddings.map(parseLength);\n\n      this.borderBox = {\n          x: 0,\n          y: 0,\n          width: element.offsetWidth,\n          height: element.offsetHeight\n      };\n\n      this.marginBox = {\n          x: -this.margins[3],\n          y: -this.margins[0],\n          width: element.offsetWidth + this.margins[1] + this.margins[3],\n          height: element.offsetHeight + this.margins[0] + this.margins[2]\n      };\n\n      // Resolved values, may not be in px\n      // These are stored in their CSS order, top-left (width/height), top-right, bottom-right, bottom-left\n      var self = this;\n      var radii = ['borderTopLeftRadius', 'borderTopRightRadius', 'borderBottomRightRadius', 'borderBottomLeftRadius'];\n      this.borderBox.radii = radii.map(function(radius, index) {\n          radius = computedStyle[radius].split(/\\s+/);\n          return [\n              self.toPixels(radius[0], self.borderBox.width),\n              self.toPixels(radius.length > 1 ? radius[1] : radius[0], self.borderBox.height)\n          ];\n      });\n\n      this.cssFloat = computedStyle.cssFloat;\n  }\n\n  Metrics.prototype.unitToPx = function(unit) {\n      if (this.units[unit])\n          return this.units[unit];\n      var cached = this.element.style.getPropertyValue('line-height');\n      this.element.style.setProperty('line-height', 1 + unit);\n      this.units[unit] = parseFloat(getComputedStyle(this.element).getPropertyValue('line-height'));\n      this.element.style.setProperty('line-height', cached);\n      return this.units[unit];\n  };\n\n  Metrics.prototype.getUnitsMap = function(element) {\n      var units = ['em', 'ex', 'ch', 'rem', 'vw', 'vh', 'vmin', 'vmax', 'cm', 'mm', 'in', 'px', 'pt', 'pc'];\n\n      var child = document.createElement('div');\n      child.style.width = '0px';\n      child.style.height = '0px';\n\n      element.appendChild(child);\n      var style = getComputedStyle(child);\n\n      var result = {};\n      units.forEach(function(unit) {\n          child.style.lineHeight = '1' + unit;\n          // computed height is in px\n          result[unit] = parseFloat(style.lineHeight);\n      });\n      child.parentNode.removeChild(child);\n\n      return result;\n  };\n\n  Metrics.prototype.toPixels = function(length, percentageBase) {\n      var split = /([\\-0-9\\.]*)([a-z%]*)/.exec(length);\n      split[1] = parseFloat(split[1]);\n      if (!split[2])\n          return split[1];\n      if (split[2] === '%')\n          return split[1] * percentageBase / 100;\n      return split[1] * this.unitToPx(split[2]);\n  };\n\n  /* Returns > 0 if the slope of the line through origin and endPoint2 is greater than the slope through\n   * origin and endPoint1. Returns 0 if they have the same slope, negative otherwise.\n   */\n  function compareLineSlopes(origin, endPoint1, endPoint2) {\n      return ((endPoint2.x - origin.x) * (endPoint1.y - origin.y)) - ((endPoint1.x - origin.x) * (endPoint2.y - origin.y));\n  }\n\n  function areCollinearPoints(p0, p1, p2) {\n      return Math.abs(compareLineSlopes(p0, p1, p2)) < 350;  // FIXME: threshold is a hack and it's wrong\n  }\n\n  function areCoincidentPoints(p0, p1) {\n      return p0.x == p1.x && p0.y == p1.y;\n  }\n\n  function isPointOnLineSegment(lineStartPoint, lineEndPoint, point)\n  {\n      return point.x >= Math.min(lineStartPoint.x, lineEndPoint.x) &&\n          point.x <= Math.max(lineStartPoint.x, lineEndPoint.x) &&\n          areCollinearPoints(lineStartPoint, lineEndPoint, point);\n  }\n\n  /* Parent class for different edge types, child classes will need to call init\n   * to initialize the appropriate member variables */\n  function PolygonEdge() {\n  }\n\n  PolygonEdge.prototype.init = function(polygon, vertex1, vertex2) {\n      this.polygon = polygon;\n      this.vertex1 = vertex1;\n      this.vertex2 = vertex2;\n      this.minX = Math.min(this.vertex1.x, this.vertex2.x);\n      this.maxX = Math.max(this.vertex1.x, this.vertex2.x);\n  };\n\n  PolygonEdge.prototype.containsPoint = function(point) {\n      return isPointOnLineSegment(this.vertex1, this.vertex2, point);\n  };\n\n  PolygonEdge.prototype.overlapsYRange = function(y1, y2) { // y range: y1 <= y <= y2\n      var edgeY1 = this.vertex1.y;\n      var edgeY2 = this.vertex2.y;\n      return y2 >= Math.min(edgeY1, edgeY2) && y1 <= Math.max(edgeY1, edgeY2);\n  };\n\n  PolygonEdge.prototype.isWithinYRange = function(y1, y2) { // y range: y1 <= y <= y2\n      var edgeY1 = this.vertex1.y;\n      var edgeY2 = this.vertex2.y;\n      return y1 <= Math.min(edgeY1, edgeY2) && y2 >= Math.max(edgeY1, edgeY2);\n  };\n\n  PolygonEdge.prototype.inwardNormal = function()\n  {\n      // \"inward\" - assuming that polygon's vertices are in clockwise order\n      var dx = this.vertex2.x - this.vertex1.x;\n      var dy = this.vertex2.y - this.vertex1.y;\n      var edgeLength = Math.sqrt(dx*dx + dy*dy);\n      return {x: -dy/edgeLength, y: dx/edgeLength};\n  };\n\n  PolygonEdge.prototype.outwardNormal = function()\n  {\n      var n = this.inwardNormal();\n      return {x: -n.x, y: -n.y};\n  };\n\n  PolygonEdge.prototype.xIntercept = function(y) {\n      var vertex1Y = this.vertex1.y;\n      var vertex2Y = this.vertex2.y;\n\n      if (vertex1Y == vertex2Y)\n          return Math.min(this.vertex1.x, this.vertex2.x);\n\n      if (y == Math.min(vertex1Y, vertex2Y))\n          return (vertex1Y < vertex2Y) ? this.vertex1.x : this.vertex2.x;\n\n      if (y == Math.max(vertex1Y, vertex2Y))\n          return (vertex1Y > vertex2Y) ? this.vertex1.x : this.vertex2.x;\n\n      return this.vertex1.x + ((y - vertex1Y) * (this.vertex2.x - this.vertex1.x) / (vertex2Y - vertex1Y));\n  };\n\n  /* Clip the edge line segment to the vertical range y1,y2 and then return\n   * the clipped line segment's horizontal range as {x1, x2}, where x2 >= x1;\n   * This method assumes that this edge overlaps y1,y2.\n  */\n  PolygonEdge.prototype.clippedEdgeXRange = function(y1, y2) {\n      if (this.isWithinYRange(y1, y2)) {\n          var vertex1X = this.vertex1.x;\n          var vertex2X = this.vertex2.x;\n          return {x1: Math.min(vertex1X, vertex2X), x2: Math.max(vertex1X, vertex2X)};\n      }\n\n      var minYVertex, maxYVertex;\n      if (this.vertex1.y < this.vertex2.y) {\n          minYVertex = this.vertex1;\n          maxYVertex = this.vertex2;\n      }\n      else {\n          minYVertex = this.vertex2;\n          maxYVertex = this.vertex1;\n      }\n\n      var xForY1 = (minYVertex.y < y1) ? this.xIntercept(y1) : minYVertex.x;\n      var xForY2 = (maxYVertex.y > y2) ? this.xIntercept(y2) : maxYVertex.x;\n      return {x1: Math.min(xForY1, xForY2), x2: Math.max(xForY1, xForY2)};\n  };\n\n  /* Clip the circle to the vertical range y1,y2 and return the extent of the clipped circle's\n   * projection on the X axis as {x1, x2}, where x2 >= x1. This method assumes that the circle\n   * overlaps y1, y2.\n  */\n  function clippedCircleXRange(center, radius, y1, y2) {\n      if (center.y >= y1 && center.y <= y2)\n          return {x1: center.x - radius, x2: center.x + radius};\n\n      var yi, xi;\n      if (y2 < center.y) {\n          yi = y2 - center.y;\n          xi = ellipseXIntercept(yi, radius, radius);\n          return {x1: center.x - xi, x2: center.x + xi};\n      }\n\n      yi =  y1 - center.y;\n      xi = ellipseXIntercept(yi, radius, radius);\n      return {x1: center.x - xi, x2: center.x + xi};\n  }\n\n  /* The edge of a polygon shape */\n  function ShapeEdge(polygon, vertex1, vertex2) {\n      this.init(polygon, vertex1, vertex2);\n  }\n\n  ShapeEdge.prototype = new PolygonEdge();\n\n  /* The polygon shape edge offset by shape-margin */\n  function OffsetEdge(edge, normalUnitVector) {\n      var shapeMargin = edge.polygon.shapeMargin;\n      var dx = normalUnitVector.x * shapeMargin;\n      var dy = normalUnitVector.y * shapeMargin;\n\n      this.anchorEdge = edge;\n      this.normalUnitVector = normalUnitVector;\n\n      var vertex1 = {x: edge.vertex1.x + dx, y: edge.vertex1.y + dy};\n      var vertex2 = {x: edge.vertex2.x + dx, y: edge.vertex2.y + dy};\n\n      this.init(edge.polygon, vertex1, vertex2);\n  }\n\n  OffsetEdge.prototype = new PolygonEdge();\n\n  function isVertexOrderClockwise(vertices) {\n      var minVertexIndex = 0;\n      for (var i = 1; i < vertices.length; ++i) {\n          var p = vertices[i];\n          if (p.y < vertices[minVertexIndex].y || (p.y == vertices[minVertexIndex].y && p.x < vertices[minVertexIndex].x))\n              minVertexIndex = i;\n      }\n      var nextVertex = vertices[(minVertexIndex + 1) % vertices.length];\n      var prevVertex = vertices[(minVertexIndex + vertices.length - 1) % vertices.length];\n      return compareLineSlopes(prevVertex, vertices[minVertexIndex], nextVertex) < 0;\n  }\n\n  function Polygon(vertices, fillRule, shapeMargin) { // vertices:  [{x, y}]\n      this.m_vertices = vertices;\n      this.fillRule  = fillRule;\n      this.shapeMargin = shapeMargin;\n\n      if (vertices.length < 3) {\n          this.m_edges = [];\n          this.shapeMarginEdges = [];\n          return;\n      }\n\n      var edges = [];\n      var minX = (vertices.length > 0) ? vertices[0].x : undefined;\n      var minY = (vertices.length > 0) ? vertices[0].y : undefined;\n      var maxX = minX;\n      var maxY = minY;\n\n      var clockwise = isVertexOrderClockwise(vertices);\n      var vertex1Index = 0;\n      do {\n          var vertex2Index = this.nextEdgeVertexIndex(vertex1Index, clockwise);\n          edges.push(new ShapeEdge(this, vertices[vertex1Index], vertices[vertex2Index]));\n          var x = vertices[vertex1Index].x;\n          var y = vertices[vertex1Index].y;\n          minX = Math.min(x, minX);\n          minY = Math.min(y, minY);\n          maxX = Math.max(x, maxX);\n          maxY = Math.max(y, maxY);\n          vertex1Index = vertex2Index;\n\n      } while (vertex1Index !== 0);\n\n      // Where possible, combine 2 edges into 1\n      var edgeIndex = 0, nextEdgeIndex;\n      while (edgeIndex < edges.length && edges.length > 3) {\n          nextEdgeIndex = (edgeIndex + 1) % edges.length;\n          if (areCollinearPoints(edges[edgeIndex].vertex1, edges[edgeIndex].vertex2, edges[nextEdgeIndex].vertex2)) {\n              edges[edgeIndex].vertex2 = edges[nextEdgeIndex].vertex2;\n              edges.splice(nextEdgeIndex, 1);\n          } else\n              edgeIndex++;\n      }\n\n      if (shapeMargin === 0) {\n          this.shapeMarginEdges = edges;\n      } else {\n          var shapeMarginEdges = [];\n          for(var i = 0; i < edges.length; i++) {\n              shapeMarginEdges.push(new OffsetEdge(edges[i], edges[i].outwardNormal()));\n              shapeMarginEdges.push(new OffsetEdge(edges[i], edges[i].inwardNormal()));\n          }\n          this.shapeMarginEdges = shapeMarginEdges;\n      }\n\n      this.m_edges = edges;\n      this.bounds = new Rect(minX - shapeMargin, minY - shapeMargin, shapeMargin*2 + (maxX - minX), shapeMargin*2 + (maxY - minY));\n  }\n\n  Polygon.prototype.vertexAt = function(index) { return this.m_vertices[index]; };\n\n  Polygon.prototype.edgeAt = function(index) { return this.m_edges[index]; };\n\n  Polygon.prototype.isEmpty = function() { return this.m_edges.length < 3 || this.bounds.isEmpty(); };\n\n  Polygon.prototype.vertices = function() { return this.m_vertices.slice(0); };\n  Polygon.prototype.edges = function() { return this.m_edges.slice(0); };\n\n  Polygon.prototype.overlapsYRange = function(y1, y2) { // y range: y1 <= y < y2\n      return y1 < this.bounds.maxY && y2 >= this.bounds.y;\n  };\n\n  Polygon.prototype.nextVertexIndex = function(vertexIndex, clockwise) {\n      var nVertices = this.m_vertices.length;\n      return ((clockwise) ? vertexIndex + 1 : vertexIndex - 1 + nVertices) % nVertices;\n  };\n\n  Polygon.prototype.nextEdgeVertexIndex = function(vertex1Index, clockwise) {\n      var nVertices = this.m_vertices.length;\n      var vertex2Index = this.nextVertexIndex(vertex1Index, clockwise);\n\n      while (vertex2Index && areCoincidentPoints(this.vertexAt(vertex1Index), this.vertexAt(vertex2Index)))\n          vertex2Index = this.nextVertexIndex(vertex2Index, clockwise);\n\n      while (vertex2Index) {\n          var vertexIndex3 = this.nextVertexIndex(vertex2Index, clockwise);\n          if (!areCollinearPoints(this.vertexAt(vertex1Index), this.vertexAt(vertex2Index), this.vertexAt(vertexIndex3)))\n              break;\n          vertex2Index = vertexIndex3;\n      }\n\n      return vertex2Index;\n  };\n\n  Polygon.prototype.containsPointEvenOdd = function(point) {\n      var crossingCount = 0;\n      for (var i = 0; i < this.m_edges.length; ++i) {\n          var edge = this.edgeAt(i);\n          if (edge.containsPoint(point))\n              return true;\n          var vertex1 = edge.vertex1;\n          var vertex2 = edge.vertex2;\n          if ((vertex1.y <= point.y && vertex2.y > point.y) || (vertex1.y > point.y && vertex2.y <= point.y)) {\n              var vt = (point.y  - vertex1.y) / (vertex2.y - vertex1.y);\n              if (point.x < vertex1.x + vt * (vertex2.x - vertex1.x))\n                  ++crossingCount;\n          }\n      }\n      return (crossingCount & 1) !== 0;\n  };\n\n  Polygon.prototype.containsPointNonZero = function(point) {\n      var windingNumber = 0;\n      for (var i = 0; i < this.m_edges.length; ++i) {\n          var edge = this.edgeAt(i);\n          if (edge.containsPoint(point))\n              return true;\n          var vertex1 = edge.vertex1;\n          var vertex2 = edge.vertex2;\n          if (vertex2.y < point.y) {\n              if ((vertex1.y > point.y) && (compareLineSlopes(vertex1, vertex2, point) > 0))\n                  ++windingNumber;\n          } else if (vertex2.y > point.y) {\n              if ((vertex1.y <= point.y) && (compareLineSlopes(vertex1, vertex2, point) < 0))\n                  --windingNumber;\n          }\n      }\n      return windingNumber !== 0;\n  };\n\n  Polygon.prototype.containsPoint = function(point) {\n      if (!this.bounds.containsPoint(point))\n          return false;\n      return this.fillRule == \"nonzero\" ? this.containsPointNonZero(point) : this.containsPointEvenOdd(point);\n  };\n\n  Polygon.prototype.edgeVerticesThatOverlapYRange = function(y1, y2) {\n      var result = [];\n      for (var i = 0; i < this.m_edges.length; i++) {\n          var vertex = this.edgeAt(i).vertex1;\n          if (vertex.y >= y1 && vertex.y < y2)\n              result.push(vertex);\n      }\n      return result;\n  };\n\n  Polygon.prototype.edgesThatOverlapYRange = function(y1, y2) {\n      var result = [];\n      for (var i = 0; i < this.m_edges.length; i++) {\n          var edge = this.edgeAt(i);\n          if (edge.overlapsYRange(y1, y2))\n              result.push(edge);\n      }\n      return result;\n  };\n\n  Polygon.prototype.shapeMarginEdgesThatOverlapYRange = function(y1, y2) {\n      var result = [];\n      for (var i = 0; i < this.shapeMarginEdges.length; i++) {\n          var edge = this.shapeMarginEdges[i];\n          if (edge.overlapsYRange(y1, y2))\n              result.push(edge);\n      }\n      return result;\n  };\n\n  function compareEdgeMinX(edge1, edge2) { return edge1.minX - edge2.minX; }\n\n  function compareVertexXIncreasing(vertex1, vertex2) { return vertex2.x - vertex1.x; }\n\n  Polygon.prototype.leftExclusionEdge = function(y1, y2) { // y2 >= y1\n      if (this.isEmpty() || !this.bounds.overlapsYRange(y1, y2))\n          return undefined;\n\n      var result, i, xRange;\n\n      var overlappingEdges = this.shapeMarginEdgesThatOverlapYRange(y1, y2);\n      if (overlappingEdges.length !== 0) {\n          overlappingEdges.sort(compareEdgeMinX);\n\n          result = overlappingEdges[0].clippedEdgeXRange(y1, y2).x1;\n          for (i = 1; i < overlappingEdges.length; i++) {\n              if (overlappingEdges[i].minX > result)\n                  break;\n              xRange = overlappingEdges[i].clippedEdgeXRange(y1, y2);\n              result = (result === undefined) ? xRange.x1 : Math.min(result, xRange.x1);\n          }\n      }\n\n      var shapeMargin = this.shapeMargin;\n      if (shapeMargin > 0) {\n          var overlappingVertices = this.edgeVerticesThatOverlapYRange(y1 - shapeMargin, y2 + shapeMargin);\n          overlappingVertices.sort(compareVertexXIncreasing);\n\n          for (i = 0; i < overlappingVertices.length; i++) {\n              // FIXME: short-circuit\n              xRange = clippedCircleXRange(overlappingVertices[i], shapeMargin, y1, y2);\n              result = (result === undefined) ? xRange.x1 : Math.min(result, xRange.x1);\n          }\n      }\n\n      if (result === undefined)\n          console.error(\"Polygon leftExclusionEdge() failed\");\n      return result;\n  };\n\n  function compareEdgeMaxX(edge1, edge2) { return edge2.maxX - edge1.maxX; }\n\n  function compareVertexXDecreasing(vertex1, vertex2) { return vertex1.x - vertex2.x; }\n\n  Polygon.prototype.rightExclusionEdge = function (y1, y2) { // y2 >= y1\n      if (this.isEmpty() || !this.bounds.overlapsYRange(y1, y2))\n          return undefined;\n\n      var result, i, xRange;\n\n      var overlappingEdges = this.shapeMarginEdgesThatOverlapYRange(y1, y2);\n      if (overlappingEdges.length !== 0) {\n          overlappingEdges.sort(compareEdgeMaxX);\n\n          result = overlappingEdges[0].clippedEdgeXRange(y1, y2).x2;\n          for (i = 1; i < overlappingEdges.length; i++) {\n              if (overlappingEdges[i].maxX < result)\n                  break;\n              xRange = overlappingEdges[i].clippedEdgeXRange(y1, y2);\n              result = Math.max(result, xRange.x2);\n          }\n      }\n\n      var shapeMargin = this.shapeMargin;\n      if (shapeMargin > 0) {\n          var overlappingVertices = this.edgeVerticesThatOverlapYRange(y1 - shapeMargin, y2 + shapeMargin);\n          overlappingVertices.sort(compareVertexXDecreasing);\n\n          for (i = 0; i < overlappingVertices.length; i++) {\n              // FIXME: short-circuit\n              xRange = clippedCircleXRange(overlappingVertices[i], shapeMargin, y1, y2);\n              result = (result === undefined) ? xRange.x2 : Math.max(result, xRange.x2);\n          }\n      }\n\n      if (result === undefined)\n          console.error(\"Polygon rightExclusionEdge() failed\");\n      return result;\n  };\n\n  /* Loading an image can fail for several reasons. Try to log an\n   * error only once, and mark the appropriate values as undefined.\n   */\n  function RasterInterval(y, startX, endX) {\n      this.y = y;\n      this.startX = startX;\n      this.endX = endX;\n  }\n\n  function RasterIntervals(yOffset, size) {\n      this.intervals = [];\n      this.yOffset = yOffset;\n      this.size = size;\n      for (var i = 0; i < size; i++)\n          this.intervals[i] = RasterIntervals.none;\n      this.minY = -yOffset;\n      this.maxY = size - yOffset;\n  }\n\n  RasterIntervals.none = {};\n\n  RasterIntervals.prototype.intervalAt = function(y) { return this.intervals[y + this.yOffset]; };\n  RasterIntervals.prototype.setIntervalAt = function(y, value) { this.intervals[y + this.yOffset] = value; };\n\n  RasterIntervals.prototype.uniteIntervalAt = function(y, interval) {\n      var intervalAtY = this.intervalAt(y);\n      if (intervalAtY === RasterIntervals.none)\n          this.setIntervalAt(y, interval);\n      else {\n          intervalAtY.startX = Math.min(intervalAtY.startX, interval.startX);\n          intervalAtY.endX = Math.max(intervalAtY.endX, interval.endX);\n      }\n  };\n\n  RasterIntervals.prototype.intervalAtContains = function(y, interval) {\n      var intervalAtY = this.intervalAt(y);\n      if (intervalAtY == RasterIntervals.none)\n          return false;\n      return intervalAtY.startX <= interval.startX && intervalAtY.endX >= interval.endX;\n  };\n\n  function ShapeMarginIntervalGenerator(shapeMargin) {\n      this.shapeMargin = shapeMargin;\n      this.xIntercepts = [];\n      for (var y = 0; y <= shapeMargin; y++)\n          this.xIntercepts[y] = Math.sqrt(shapeMargin * shapeMargin - y * y);\n  }\n\n  ShapeMarginIntervalGenerator.prototype.generateIntervalAt = function(atY, forInterval) {\n      var xInterceptsIndex = Math.abs(atY - forInterval.y);\n      var dx = (xInterceptsIndex > this.shapeMargin) ? 0 : this.xIntercepts[xInterceptsIndex];\n      return new RasterInterval(atY, forInterval.startX - dx, forInterval.endX + dx);\n  };\n\n  RasterIntervals.prototype.computeMarginIntervals = function(shapeMargin, clip) {\n      var mig = new ShapeMarginIntervalGenerator(shapeMargin);\n      var result = new RasterIntervals(this.yOffset, this.size);\n\n      for (var y = this.minY; y < this.maxY; ++y) {\n          var intervalAtY = this.intervalAt(y);\n          if (intervalAtY == RasterIntervals.none)\n              continue;\n\n          var marginY0 = Math.max(this.minY, y - shapeMargin);\n          var marginY1 = Math.min(this.maxY - 1, y + shapeMargin);\n          var marginY;\n\n          for (marginY = y - 1; marginY >= marginY0; --marginY) {\n              if (marginY > 0 && this.intervalAtContains(marginY, intervalAtY))\n                  break;\n              result.uniteIntervalAt(marginY, mig.generateIntervalAt(marginY, intervalAtY));\n          }\n\n          result.uniteIntervalAt(y, mig.generateIntervalAt(y, intervalAtY));\n\n          for (marginY = y + 1; marginY <= marginY1; ++marginY) {\n              if (marginY < this.maxY && this.intervalAtContains(marginY, intervalAtY))\n                  break;\n              result.uniteIntervalAt(marginY, mig.generateIntervalAt(marginY, intervalAtY));\n          }\n      }\n      return result;\n  };\n\n  function error(url, exception) {\n      console.log(\"Unable to load image \", url, \". It's probably missing or you've run into a CORS issue.\");\n      if (exception)\n          console.log(\"The exact problem was \", exception);\n  }\n\n  function RasterImage(image, width, height) {\n      var canvas = document.createElement(\"canvas\");\n      this.width = canvas.width = width;\n      this.height = canvas.height = height;\n      var g = canvas.getContext(\"2d\");\n      g.drawImage(image, 0, 0, width, height);\n      try {\n          this.imageData = g.getImageData(0, 0, width, height);\n      } catch (e) {\n          error(image.src, e);\n          /* imageData will be undefined */\n      }\n  }\n\n  RasterImage.prototype.hasData = function() { return !!this.imageData; };\n\n  RasterImage.prototype.alphaAt = function(x, y) {\n      return this.imageData.data[(x * 4 + 3) + y * this.width * 4];\n  };\n\n  function Raster(url, box, shapeImageThreshold, shapeMargin, clip, whenReady) {\n      this.url = url;\n      this.box = box;\n      this.shapeImageThreshold = (256 * shapeImageThreshold);\n      this.shapeMargin = shapeMargin;\n      this.clip = clip;\n\n      this.init(whenReady);\n  }\n\n  Raster.prototype.init = function(callback) {\n      var raster = this;\n      var image = new Image();\n      var blob;\n\n      /* If canvas is not supported, we're not going to get any further, so\n       * don't bother with the potential image / XHR request */\n      var canvas = document.createElement(\"canvas\");\n      if (!canvas.getContext) {\n          error(raster.url);\n          callback();\n      }\n\n      image.onload = function() {\n          raster.intervals = raster.computeIntervals(image);\n          if (raster.intervals) {\n              if (raster.shapeMargin > 0)\n                  raster.intervals = raster.intervals.computeMarginIntervals(raster.shapeMargin, raster.clip);\n          }\n          if (blob)\n              URL.revokeObjectURL(blob);\n          callback();\n      };\n\n      image.onerror = function() {\n          error(raster.url);\n          /* raster.intervals is undefined */\n          callback();\n      };\n\n      /* Try this approach for browsers that don't support\n       * CORS-enabled images (ie IE). Ideally we'd skip this\n       * for same-origin images, but we don't have a good test\n       * for that. */\n      if (!image.hasOwnProperty('crossOrigin') &&\n          window.URL &&\n          window.URL.createObjectURL) {\n          var xhr = new XMLHttpRequest();\n          xhr.onreadystatechange = function() {\n              if (xhr.readyState === 4) {\n                  if (xhr.status === 200) {\n                      blob = URL.createObjectURL(xhr.response);\n                      image.src = blob;\n                  } else {\n                      error(raster.url);\n                      callback();\n                  }\n              }\n          };\n          xhr.open('GET', raster.url, true);\n          xhr.responseType = 'blob';\n          xhr.send();\n      } else {\n          image.crossOrigin = \"anonymous\";\n          image.src = raster.url;\n      }\n  };\n\n  Raster.prototype.computeIntervals = function(image) {\n      var clip = this.clip,\n          threshold = this.shapeImageThreshold,\n          width = this.box.width,\n          height = this.box.height,\n          rasterImage = new RasterImage(image, width, height);\n\n      if (!rasterImage.hasData())\n          return undefined;\n\n      var intervals = new RasterIntervals(-clip.y, clip.height),\n          maxY = Math.min(clip.height, this.box.height);\n      for (var y = 0; y < maxY; y++) {\n          var startX = -1;\n          for (var x = 0; x < this.box.width; x++) {\n              var alpha = rasterImage.alphaAt(x, y);\n              if (startX == -1 && alpha > threshold) {\n                  startX = x;\n                  if (intervals.intervalAt(y) === RasterIntervals.none)\n                      intervals.setIntervalAt(y, new RasterInterval(y, startX, width));\n              } else if (startX != -1 && alpha <= threshold) {\n                  intervals.intervalAt(y).endX = x;\n                  startX = -1;\n              }\n          }\n      }\n      return intervals;\n  };\n\n  Raster.prototype.rightExclusionEdge = function (y1, y2) { // y2 >= y1\n      var intervals = this.intervals;\n      if (!intervals)\n          return this.clip.width;\n      var x; // = undefined;\n      for (var y = Math.max(y1, this.clip.y); y <= y2 && y < this.clip.maxY; y++) {\n          var endX = intervals.intervalAt(y).endX;\n          if (x === undefined || (endX !== undefined && endX > x))\n              x = endX;\n      }\n      return x;\n  };\n\n  Raster.prototype.leftExclusionEdge = function(y1, y2) { // y2 >= y1\n      var intervals = this.intervals;\n      if (!intervals)\n          return 0;\n      var x; // = undefined;\n      for (var y = Math.max(y1, this.clip.y); y <= y2 && y < this.clip.maxY; y++) {\n          var startX = intervals.intervalAt(y).startX;\n          if (x === undefined || (startX !== undefined && startX < x))\n              x = startX;\n      }\n      return x;\n  };\n\n  function Size(width, height) {\n      this.width = width;\n      this.height = height;\n  }\n\n  Size.zeroSize = { width:0, height:0 };\n\n  Size.prototype.isEmpty = function() { return this.width <= 0 || this.height <= 0; };\n\n  Size.prototype.scale = function(factor) {\n      this.width *= factor;\n      this.height *= factor;\n  };\n\n  function Rect(x, y, width, height) {\n      this.x = x;\n      this.y = y;\n      this.width = width;\n      this.height = height;\n      this.maxX = x + width;\n      this.maxY = y + height;\n  }\n\n  Rect.prototype.isEmpty = function() { return this.width <= 0 || this.height <= 0; };\n\n  Rect.prototype.containsX = function(x) { return x >= this.x && x < this.maxX; };\n  Rect.prototype.containsY = function(y) { return y >= this.y && y < this.maxY; };\n  Rect.prototype.containsPoint = function(p) { return this.containsX(p.x) && this.containsY(p.y); };\n\n  Rect.prototype.shiftLeftEdgeTo = function(newX) {\n      this.width -= newX - this.x;\n      this.x = newX;\n  };\n\n  Rect.prototype.shiftTopEdgeTo = function(newY) {\n      this.height -= newY - this.y;\n      this.y = newY;\n  };\n\n  Rect.prototype.shiftRightEdgeTo = function(newX) {  this.width = newX - this.x; };\n  Rect.prototype.shiftBottomEdgeTo = function(newY) { this.height = newY - this.y; };\n\n  Rect.prototype.overlapsYRange = function(minY, maxY) {\n      return !this.isEmpty() && maxY >= this.y && minY < this.maxY;\n  };\n\n  Rect.prototype.overlapsXRange = function(minX, maxX) {\n      return !this.isEmpty() && maxX >= this.x && minX < this.maxX;\n  };\n\n  function RoundedRect(rect, topLeft, topRight, bottomLeft, bottomRight) { // corner radii parameters are {width, height}\n      this.rect = rect;\n      this.radii = {topLeft: topLeft, topRight: topRight, bottomLeft: bottomLeft, bottomRight: bottomRight};\n  }\n\n  RoundedRect.prototype.isEmpty = function() { return this.width <= 0 || this.height <= 0; };\n\n  RoundedRect.prototype.topLeftCorner = function() {\n      return new Rect(\n          this.rect.x,\n          this.rect.y,\n          this.radii.topLeft.width,\n          this.radii.topLeft.height);\n  };\n\n  RoundedRect.prototype.topRightCorner = function() {\n      return new Rect(\n          this.rect.maxX - this.radii.topRight.width,\n          this.rect.y,\n          this.radii.topRight.width,\n          this.radii.topRight.height);\n  };\n\n  RoundedRect.prototype.bottomLeftCorner = function() {\n      return new Rect(\n          this.rect.x,\n          this.rect.maxY - this.radii.bottomLeft.height,\n          this.radii.bottomLeft.width,\n          this.radii.bottomLeft.height);\n  };\n\n  RoundedRect.prototype.bottomRightCorner = function() {\n      return new Rect(\n          this.rect.maxX - this.radii.bottomRight.width,\n          this.rect.maxY - this.radii.bottomRight.height,\n          this.radii.bottomRight.width,\n          this.radii.bottomRight.height);\n  };\n\n  RoundedRect.prototype.isRounded = function() {\n      function isCornerRadiusNonZero(radius) { return radius.width > 0 && radius.height > 0; }\n      return isCornerRadiusNonZero(this.radii.topLeft) ||\n         isCornerRadiusNonZero(this.radii.topRight) ||\n         isCornerRadiusNonZero(this.radii.bottomLeft) ||\n         isCornerRadiusNonZero(this.radii.bottomRight);\n  };\n\n  RoundedRect.prototype.cornersInsetRect = function() {\n      var topLeftCorner = this.topLeftCorner();\n      var topRightCorner = this.topRightCorner();\n      var bottomLeftCorner = this.bottomLeftCorner();\n      var bottomRightCorner = this.bottomRightCorner();\n      var x = Math.max(topLeftCorner.maxX, bottomLeftCorner.maxX);\n      var y = Math.max(topLeftCorner.maxY, topRightCorner.maxY);\n      return new Rect(x, y, Math.min(topRightCorner.x, bottomRightCorner.x) - x, Math.min(bottomLeftCorner.y, bottomRightCorner.y) - y);\n  };\n\n  RoundedRect.prototype.scaleRadii = function(factor)\n  {\n      if (factor == 1)\n          return;\n      var radii = this.radii;\n\n      radii.topLeft.scale(factor);\n      if (radii.topLeft.isEmpty())\n          radii.topLeft = Size.zeroSize;\n\n      radii.topRight.scale(factor);\n      if (radii.topRight.isEmpty())\n          radii.topRight = Size.zeroSize;\n\n      radii.bottomLeft.scale(factor);\n      if (radii.bottomLeft.isEmpty())\n          radii.bottomLeft = Size.zeroSize;\n\n      radii.bottomRight.scale(factor);\n      if (radii.bottomRight.isEmpty())\n          radii.bottomRight = Size.zeroSize;\n  };\n\n  // See RoundedRect::isRenderable() in https://trac.webkit.org/browser/trunk/Source/WebCore/platform/graphics/RoundedRect.cpp\n  // and http://www.w3.org/TR/css3-background/#corner-overlap\n\n  RoundedRect.prototype.isRenderable = function()\n  {\n      var radii = this.radii;\n      var rect = this.rect;\n      return radii.topLeft.width + radii.topRight.width <= rect.width &&\n          radii.bottomLeft.width + radii.bottomRight.width <= rect.width &&\n          radii.topLeft.height + radii.bottomLeft.height <= rect.height &&\n          radii.topRight.height + radii.bottomRight.height <= rect.height;\n  };\n\n  // See RoundedRect::adjustRadii() in https://trac.webkit.org/browser/trunk/Source/WebCore/platform/graphics/RoundedRect.cpp\n  // and http://www.w3.org/TR/css3-background/#corner-overlap\n\n  RoundedRect.prototype.adjustRadii = function()\n  {\n      var radii = this.radii;\n      var maxRadiusWidth = Math.max(radii.topLeft.width + radii.topRight.width, radii.bottomLeft.width + radii.bottomRight.width);\n      var maxRadiusHeight = Math.max(radii.topLeft.height + radii.bottomLeft.height, radii.topRight.height + radii.bottomRight.height);\n      if (maxRadiusWidth <= 0 || maxRadiusHeight <= 0) {\n          this.radii = {\n              topLeft: Size.zeroSize,\n              topRight: Size.zeroSize,\n              bottomRight: Size.zeroSize,\n              bottomLeft: Size.zeroSize\n          };\n          return;\n      }\n      var rect = this.rect;\n      var widthRatio = rect.width / maxRadiusWidth;\n      var heightRatio = rect.height / maxRadiusHeight;\n      this.scaleRadii(widthRatio < heightRatio ? widthRatio : heightRatio);\n  };\n\n  function ellipseXIntercept(y, rx, ry) {\n      return rx * Math.sqrt(1 - (y * y) / (ry * ry));\n  }\n\n  RoundedRect.prototype.minXInterceptAt = function(y, noInterceptReturnValue) {\n      if (!this.rect.containsY(y))\n          return noInterceptReturnValue;\n\n      var topLeftCorner = this.topLeftCorner(), yi;\n      if (topLeftCorner.containsY(y)) {\n          yi = topLeftCorner.maxY - y;\n          return topLeftCorner.maxX  - ellipseXIntercept(yi, topLeftCorner.width, topLeftCorner.height);\n      }\n\n      var bottomLeftCorner = this.bottomLeftCorner();\n      if (bottomLeftCorner.containsY(y)) {\n          yi = y - bottomLeftCorner.y;\n          return bottomLeftCorner.maxX - ellipseXIntercept(yi, bottomLeftCorner.width, bottomLeftCorner.height);\n      }\n\n      return this.rect.x;\n  };\n\n  RoundedRect.prototype.maxXInterceptAt = function(y, noInterceptReturnValue) {\n      if (!this.rect.containsY(y))\n          return noInterceptReturnValue;\n\n      var topRightCorner = this.topRightCorner(), yi;\n      if (topRightCorner.containsY(y)) {\n          yi = topRightCorner.maxY - y;\n          return topRightCorner.x + ellipseXIntercept(yi, topRightCorner.width, topRightCorner.height);\n      }\n\n      var bottomRightCorner = this.bottomRightCorner();\n      if (bottomRightCorner.containsY(y)) {\n          yi = y - bottomRightCorner.y;\n          return bottomRightCorner.x + ellipseXIntercept(yi, bottomRightCorner.width, bottomRightCorner.height);\n      }\n\n      return this.rect.maxX;\n  };\n\n  RoundedRect.prototype.rightExclusionEdge = function (y1, y2) { // y2 >= y1\n      if (this.rect.isEmpty() || !this.rect.overlapsYRange(y1, y2))\n          return undefined;\n\n      if (!this.isRounded() || this.cornersInsetRect().overlapsYRange(y1, y2))\n          return this.rect.maxX;\n\n      return Math.max(this.maxXInterceptAt(y1, this.rect.x), this.maxXInterceptAt(y2, this.rect.x));\n  };\n\n  RoundedRect.prototype.leftExclusionEdge = function(y1, y2) { // y2 >= y1\n      if (this.rect.isEmpty() || !this.rect.overlapsYRange(y1, y2))\n          return undefined;\n\n      if (!this.isRounded() || this.cornersInsetRect().overlapsYRange(y1, y2))\n          return this.rect.x;\n\n      return Math.min(this.minXInterceptAt(y1, this.rect.maxX), this.minXInterceptAt(y2, this.rect.maxX));\n  };\n\n  function computeOffsetHeight(dx, dy, areaLimit) {\n      if (dy === 0)\n          return 1;\n      if (dx === 0 || (dx * dy) / 2 < areaLimit)\n          return Math.round(dy);\n      return Math.round(Math.sqrt(2 * areaLimit * (dy / dx)));\n  }\n\n  function leftCornerOffset(leftCorner, offset) { return leftCorner.maxX - offset; }\n  function rightCornerOffset(rightCorner, offset) { return rightCorner.x + offset; }\n  function leftBoxOffset(box) { return box.x; }\n  function rightBoxOffset(box) { return box.maxX; }\n\n  function adaptiveOffsetFnGenerator(getTopCorner, getBottomCorner, getBoxOffset, getCornerOffset) {\n  return function(y1, y2, areaLimit) { // y2 >= y1\n      if (!this.rect.overlapsYRange(y1, y2))\n          return [{x: undefined, height: y2 - y1}];\n\n      var offsets = [];\n\n      if (y1 < this.rect.y)\n          offsets.push({x: undefined, height: this.rect.y - y1});\n\n      var offsetHeight, minY, maxY, y, yi, xi,\n          topCorner = getTopCorner.call(this),\n          bottomCorner = getBottomCorner.call(this),\n          boxArea = new Rect(this.rect.x, topCorner.maxY, this.rect.width, bottomCorner.y - topCorner.maxY);\n\n      if (topCorner.overlapsYRange(y1, y2)) {\n          offsetHeight = computeOffsetHeight(topCorner.width, topCorner.height, areaLimit);\n          minY = Math.max(topCorner.y, y1);\n          maxY = Math.min(topCorner.maxY, y2);\n          for (y = minY; y < maxY; y += offsetHeight) {\n              yi = topCorner.maxY - Math.min(y + offsetHeight, maxY);\n              xi = ellipseXIntercept(yi, topCorner.width, topCorner.height);\n              offsets.push({height: Math.min(offsetHeight, maxY - y), x: getCornerOffset(topCorner, xi) });\n          }\n      }\n\n      minY = Math.max(boxArea.y, y1);\n      maxY = Math.min(boxArea.maxY, y2);\n      if (boxArea.overlapsYRange(y1, y2))\n          offsets.push({x: getBoxOffset(boxArea), height: maxY - minY });\n\n      if (bottomCorner.overlapsYRange(y1, y2)) {\n          offsetHeight = computeOffsetHeight(bottomCorner.width, bottomCorner.height, areaLimit);\n          minY = Math.max(y1, bottomCorner.y);\n          maxY = Math.min(bottomCorner.maxY, y2);\n          for (y = minY; y < maxY; y += offsetHeight) {\n              yi = y - bottomCorner.y;\n              xi = ellipseXIntercept(yi, bottomCorner.width, bottomCorner.height);\n              offsets.push({height: Math.min(offsetHeight, maxY - y), x: getCornerOffset(bottomCorner, xi) });\n          }\n      }\n\n      if (y2 > this.rect.maxY)\n          offsets.push({x: undefined, height: y2 - this.rect.maxY});\n\n      return offsets;\n  };\n  }\n\n  RoundedRect.prototype.rightExclusionOffsets = adaptiveOffsetFnGenerator(\n      RoundedRect.prototype.topRightCorner,\n      RoundedRect.prototype.bottomRightCorner,\n      rightBoxOffset,\n      rightCornerOffset);\n\n  RoundedRect.prototype.leftExclusionOffsets = adaptiveOffsetFnGenerator(\n      RoundedRect.prototype.topLeftCorner,\n      RoundedRect.prototype.bottomLeftCorner,\n      leftBoxOffset,\n      leftCornerOffset);\n\n  function createRoundedRectForCircle(circle, margin) {\n      var r = circle.r + margin;\n      var c = new Size(r, r);\n      return new RoundedRect(new Rect(circle.cx - r, circle.cy - r, r * 2, r * 2), c, c, c, c);\n  }\n\n  function createRoundedRectForEllipse(ellipse, margin) {\n      var c = new Size(ellipse.rx + margin, ellipse.ry + margin);\n      return new RoundedRect(new Rect(ellipse.cx - c.width, ellipse.cy - c.height, c.width * 2, c.height * 2), c, c, c, c);\n  }\n\n  function createRoundedRectForInset(inset, margin) {\n      function toSize(r) { return new Size(r[0] + margin, r[1] + margin); }\n      var topLeft = toSize(inset.radii[0]);\n      var topRight = toSize(inset.radii[1]);\n      var bottomRight = toSize(inset.radii[2]);\n      var bottomLeft = toSize(inset.radii[3]);\n      var rect = new Rect(inset.x - margin, inset.y - margin, inset.width + 2 * margin, inset.height + 2 * margin);\n      return new RoundedRect(rect, topLeft, topRight, bottomLeft, bottomRight);\n  }\n\n  function createRoundedRectForBox(box, margin) {\n      function toSize(r) { return new Size(r[0] + margin, r[1] + margin); }\n      var topLeft = toSize(box.radii[0]),\n          topRight = toSize(box.radii[1]),\n          bottomRight = toSize(box.radii[2]),\n          bottomLeft = toSize(box.radii[3]);\n      // This box is at 0,0 relative to its sizing box (itself)\n      var rect = new Rect(-margin, -margin, box.width + 2 * margin, box.height + 2 * margin);\n      return new RoundedRect(rect, topLeft, topRight, bottomLeft, bottomRight);\n  }\n\n  function createRaster(url, box, shapeImageThreshold, shapeMargin, clip, doLayout) {\n      var clipRect = new Rect(clip.x, clip.y, clip.width, clip.height);\n      return new Raster(url, box, shapeImageThreshold, shapeMargin, clipRect, doLayout);\n  }\n\n  function createPolygon(polygon, shapeMargin) {\n      return new Polygon(polygon.points, polygon.fillRule, shapeMargin);\n  }\n\n  function createShapeGeometry(shapeValue, whenReady) {\n      var shapeMargin = (shapeValue.shapeMargin === undefined) ? 0 : shapeValue.shapeMargin;\n      var geometry;\n      if (shapeValue.shape) {\n          switch (shapeValue.shape.type) {\n          case \"circle\":\n              geometry = createRoundedRectForCircle(shapeValue.shape, shapeMargin);\n              break;\n          case \"ellipse\":\n              geometry = createRoundedRectForEllipse(shapeValue.shape, shapeMargin);\n              break;\n          case \"inset\":\n              geometry = createRoundedRectForInset(shapeValue.shape, shapeMargin);\n              if (!geometry.isRenderable())\n                  geometry.adjustRadii();\n              break;\n          case \"polygon\":\n              geometry = createPolygon(shapeValue.shape, shapeMargin);\n              break;\n          }\n          whenReady();\n          return geometry;\n      }\n\n      if (shapeValue.url)\n          return createRaster(shapeValue.url, shapeValue.box, shapeValue.shapeImageThreshold, shapeMargin, shapeValue.clip, whenReady);\n\n      if (shapeValue.box) {\n          geometry = createRoundedRectForBox(shapeValue.box, shapeMargin);\n          whenReady();\n          return geometry;\n      }\n\n      console.error(\"Unrecognized shape\");\n  }\n\n\n  function ShapeInfo(element) {\n      this.metrics = new Metrics(element);\n      var parserSettings = {\n          metrics: this.metrics,\n          shapeOutside: element.getAttribute('data-shape-outside'),\n          shapeMargin: element.getAttribute('data-shape-margin'),\n          shapeImageThreshold: element.getAttribute('data-shape-image-threshold')\n      };\n      this.shapeValue = new ShapeValue(parserSettings);\n\n      var self = this;\n      this.geometry = createShapeGeometry(this.shapeValue, function() {\n          self.ready = true;\n          if (self.callback)\n              self.callback();\n      });\n  }\n\n  ShapeInfo.prototype.onReady = function(callback) {\n      if (this.ready)\n          callback();\n      else\n          this.callback = callback;\n  };\n\n  ShapeInfo.prototype.leftExclusionEdge = function(line) { // { top, bottom, left, right }\n      return this.geometry ? this.geometry.leftExclusionEdge(line.top, line.bottom) : line.left;\n  };\n\n  ShapeInfo.prototype.rightExclusionEdge = function(line) { // { top, bottom, left, right }\n      return this.geometry ? this.geometry.rightExclusionEdge(line.top, line.bottom) : line.right;\n  };\n\n  function exclusionEdgeValue(x) { return x === undefined ? 0 : x; }\n\n  ShapeInfo.prototype.computeStepOffsets = function(step) {\n      var offset, offsets = [];\n      for (var i = 0; i < Math.ceil(this.metrics.marginBox.height / step); i++) {\n          var lineBounds = {\n              left: 0,\n              right: this.shapeValue.box.width,\n              top: i * step,\n              bottom: Math.min((i + 1) * step, this.metrics.marginBox.height)\n          };\n\n          // transform to shape coordinates\n          lineBounds.top -= (this.metrics.margins[0] + this.shapeValue.box.y);\n          lineBounds.bottom -= (this.metrics.margins[0] + this.shapeValue.box.y);\n\n          // get the offset relative to the margin box\n          if (this.metrics.cssFloat === 'left') {\n              offset = this.rightExclusionEdge(lineBounds);\n              offset = (offset === undefined ? 0 : offset + this.shapeValue.box.x + this.metrics.margins[3]);\n          } else {\n              offset = this.leftExclusionEdge(lineBounds);\n              offset = (offset === undefined ? 0 : this.metrics.marginBox.width - (offset + this.shapeValue.box.x + this.metrics.margins[3]));\n          }\n\n          // push the margin box relative offsets\n          offsets.push({\n              cssFloat: this.metrics.cssFloat,\n              top: lineBounds.top + this.shapeValue.box.y + this.metrics.margins[0],\n              bottom: lineBounds.bottom + this.shapeValue.box.y + this.metrics.margins[0],\n              'offset': Math.min(offset, this.metrics.marginBox.width)\n          });\n      }\n\n      return offsets;\n  };\n\n  ShapeInfo.prototype.computeAdaptiveOffsets = function(limit) {\n      var dx = this.shapeValue.box.x + this.metrics.margins[3];\n      var dy = this.metrics.margins[0] + this.shapeValue.box.y;\n      var offsets = (this.metrics.cssFloat === 'left') ?\n          this.geometry.rightExclusionOffsets(-dy, this.metrics.marginBox.height - dy, limit) :\n          this.geometry.leftExclusionOffsets(-dy, this.metrics.marginBox.height - dy, limit);\n\n      var result = [];\n      var y = 0;\n      for (var i = 0; i < offsets.length; i++) {\n          var layoutOffset;\n          if (offsets[i].x === undefined)\n              layoutOffset = 0;\n          else {\n              layoutOffset = this.metrics.cssFloat == 'left' ?\n                  offsets[i].x + dx :\n                  this.metrics.marginBox.width - (offsets[i].x + dx);\n              layoutOffset = Math.min(layoutOffset, this.metrics.marginBox.width);\n          }\n          result.push({offset: layoutOffset, top: y, bottom: y + offsets[i].height, cssFloat: this.metrics.cssFloat});\n          y += offsets[i].height;\n      }\n\n      return result;\n  };\n\n  ShapeInfo.prototype.offsets = function(parameters) {\n      if (this.geometry instanceof RoundedRect)\n          return (parameters && parameters.mode) == \"step\" ? this.computeStepOffsets(parameters.step) : this.computeAdaptiveOffsets(parameters.limit);\n      return  this.computeStepOffsets(parameters.step);\n  };\n\n  function Polyfill(scope) {\n      this.scope = scope;\n\n      var script = document.currentScript;\n      if (!script) {\n          script = document.getElementsByTagName('script');\n          script = script[script.length - 1];\n      }\n      var self = this;\n      var autoRun = script.getAttribute('data-auto-run') !== 'false';\n\n      // IE < 9 uses attachEvent rather than addEventListener\n      if (autoRun && scope.addEventListener) {\n          scope.addEventListener('load', function() {\n              self.run(/*{mode: \"step\"}*/);\n          });\n      }\n  }\n\n  function fakeIt(element, offsets) {\n      var wrapper = document.createElement('div'),\n          styles;\n\n      offsets.forEach(function(offset, i) {\n          var height = offset.bottom - offset.top;\n          var sandbag = document.createElement('div');\n          sandbag.className = \"sandbag\";\n          styles = {\n              cssFloat: offset.cssFloat,\n              width: offset.offset + 'px',\n              height: height + 'px',\n              clear: offset.cssFloat\n          };\n          for (var prop in styles)\n              sandbag.style[prop] = styles[prop];\n          wrapper.appendChild(sandbag);\n      });\n\n      styles = {\n          position: 'relative',\n          width: 'auto',\n          height: '0',\n          clear: 'both',\n          pointerEvents: 'none'\n      };\n\n      for (var prop in styles)\n          wrapper.style[prop] = styles[prop];\n\n      var parent = element.parentNode, subwrapper,\n          computedStyle = getComputedStyle(parent),\n          borderHeight = parseFloat(computedStyle.borderTop) + parseFloat(computedStyle.borderBottom);\n\n      styles = {\n          position: 'absolute',\n          top: '0',\n          width: '100%', // will fill the whole width, FF does 'auto' differently\n          height: parent.clientHeight - borderHeight,\n          left: '0'\n      };\n\n      subwrapper = document.createElement('div');\n      for (prop in styles)\n          subwrapper.style[prop] = styles[prop];\n      wrapper.appendChild(subwrapper);\n\n      if (element.parentNode)\n          element.parentNode.insertBefore(wrapper, element);\n      subwrapper.appendChild(element);\n\n      wrapper.setAttribute('data-shape-outside-container', 'true');\n  }\n\n  Polyfill.prototype.polyfill = function(element, settings) {\n      var computedStyle = getComputedStyle(element);\n\n      if (!(/left|right/.test(computedStyle.cssFloat) && element.getAttribute('data-shape-outside')))\n          return;\n\n      // ideally this would default to lineHeight, but 'normal' is a valid computed value\n      // and is up to the UA\n      var step = settings && settings.step || parseInt(computedStyle.fontSize); // used when mode is \"step\"\n      var mode = settings && settings.mode || \"adaptive\";\n      var limit = settings && settings.limit || step * 1.8;\n      var shapeInfo = new ShapeInfo(element);\n\n      var self = this;\n      shapeInfo.onReady(function() {\n          var offsets = shapeInfo.offsets({mode:mode, limit:limit, step:step});\n          fakeIt(element, offsets);\n          if (settings && settings.callback && typeof settings.callback === 'function')\n              settings.callback.call(self.scope);\n      });\n  };\n\n  Polyfill.prototype.removePolyfill = function(element) {\n      var oldParent = element.parentNode;\n      for (oldParent = element.parentNode;\n          oldParent && oldParent.hasAttribute && !oldParent.hasAttribute('data-shape-outside-container');\n          oldParent = oldParent.parentNode);\n\n      if (!oldParent || !oldParent.hasAttribute)\n          return;\n\n      oldParent.parentNode.insertBefore(element, oldParent);\n      oldParent.parentNode.removeChild(oldParent);\n  };\n\n  function debounce(func, wait) {\n      var timeout;\n      return function() {\n          var context = this, args = arguments;\n          clearTimeout(timeout);\n          timeout = setTimeout(function() {\n              timeout = null;\n              func.apply(context, args);\n          }, wait);\n      };\n  }\n\n  Polyfill.prototype.run = function(settings) {\n      var self = this;\n\n      var force = settings && settings.force,\n          forceLayout = force && (force === this.Force.Layout || force === this.Force.LayoutStyles),\n          forceStyles = force && (force === this.Force.Styles || force === this.Force.LayoutStyles);\n\n      if (force === this.Force.LayoutStyles)\n          settings.force = this.Force.Layout;\n      else if (force)\n          delete settings.force;\n\n      if (this.hasNativeSupport === undefined) {\n          var div = document.createElement('div');\n          var properties = ['shape-outside', '-webkit-shape-outside'];\n          properties.forEach(function(property) {\n              div.style.setProperty(property, 'content-box');\n              self.hasNativeSupport = self.hasNativeSupport || div.style.getPropertyValue(property);\n          });\n      }\n\n      if (this.hasNativeSupport && !force)\n          return;\n\n      if (!this.stylesLoaded || forceStyles) {\n          this.stylesLoaded = true;\n\n          new StylePolyfill(function(rules) {\n              rules.forEach(function(rule) {\n                  var els = document.querySelectorAll(rule.selector);\n                  for (var i = 0; i < els.length; i++)\n                      els[i].setAttribute('data-' + rule.property, rule.value);\n              });\n\n              self.run(settings);\n          });\n\n          var relayout = debounce(function() {\n              self.teardown();\n              self.run(settings);\n          }, 300);\n          this.scope.addEventListener('resize', relayout);\n\n          return;\n      }\n\n      var els = document.querySelectorAll('[data-shape-outside]');\n      for (var i = 0; i < els.length; i++)\n          this.polyfill(els[i], settings);\n  };\n\n  Polyfill.prototype.teardown = function() {\n      var els = document.querySelectorAll('[data-shape-outside]');\n      for (var i = 0; i < els.length; i++)\n          this.removePolyfill(els[i]);\n  };\n\n  Polyfill.prototype.Force = { Layout: 'force-layout', Styles: 'force-styles', LayoutStyles: 'force-layout-styles' };\n  if (Object.freeze)\n      Polyfill.prototype.Force = Object.freeze(Polyfill.prototype.Force);\n\n  /**\n   * ShapeValue may contain { shape, box, url, shapeMargin, shapeImageThreshold }\n   * Format for { shape } property value, with coordinates resolved against the reference box\n   * Arrays are generally ordered as margins: t, r, b, l\n   * Except for radius arrays, which are w/h pairs ordered tl, tr, br, bl\n   * { type: 'circle', cx: 10, cy: 10, r: 10 }\n   * { type: 'ellipse', cx: 10, cy: 10, rx: 10, ry: 10 }\n   * { type: 'inset', x, y, width, height, insets: [10, 10, 10, 10], radii: [[5, 5], [5, 5], [5, 5], [5, 5]] }\n   * { type: 'polygon', fill-rule: 'evenodd', points: [{x, y}] }\n   * Format for { box } property value, the reference box for shapes. Coordinates are relative to the border box.\n   * { x: 10, y: 10, width: 10, height: 10, radii: [[5, 5], [5, 5], [5, 5], [5, 5]] }\n   * Format for { url } property value\n   * { url: 'http://www.abc.com/123.png' }\n   **/\n  /* params: {\n   *  metrics, //An element's Metrics object\n   *  shapeOutside, //The rest are unresolved values\n   *  shapeMargin,\n   *  shapeImageThreshold,\n   * }\n   */\n  function ShapeValue(params) {\n      if (!(params && params.metrics && params.shapeOutside)) {\n          console.error('ShapeValue requires at least a metrics object and shape-outside string');\n          return;\n      }\n      this.url = this.parseUrl(params.shapeOutside);\n      this.box = this.parseBox(this.url ? 'content-box' : params.shapeOutside, params.metrics);\n      this.shape = this.parseBasicShape(params.shapeOutside, this.box, params.metrics);\n      this.clip = this.computeClip(this.box, params.metrics);\n      this.shapeMargin = this.parseShapeMargin(params.shapeMargin, this.box, params.metrics);\n      this.shapeImageThreshold = this.parseShapeImageThreshold(params.shapeImageThreshold);\n  }\n\n  ShapeValue.prototype.parseUrl = function(text) {\n      var url = /url\\((.*)\\)/.exec(text);\n      if (!url)\n          return null;\n      url = url[1];\n      url = url.replace(/^['\"]/, '');\n      url = url.replace(/['\"]$/, '');\n      return url;\n  };\n\n  function adjustBounds(bounds, sign, offsets) {\n      var top = offsets.reduce(function(prev, curr) { return prev + curr[0]; }, 0);\n      var right = offsets.reduce(function(prev, curr) { return prev + curr[1]; }, 0);\n      var bottom = offsets.reduce(function(prev, curr) { return prev + curr[2]; }, 0);\n      var left = offsets.reduce(function(prev, curr) { return prev + curr[3]; }, 0);\n\n      bounds.x -= sign * left;\n      bounds.y -= sign * top;\n      bounds.width += sign * (left + right);\n      bounds.height += sign * (top + bottom);\n  }\n\n  // See http://dev.w3.org/csswg/css-shapes/#margin-box\n  function adjustRadius(radius, sign, offset) {\n      if (sign < 0)\n          return Math.max(radius + sign * offset, 0);\n      var ratio = Math.abs(radius / offset);\n      if (ratio < 1)\n          return Math.max(radius + offset * (1 + Math.pow(ratio - 1, 3)), 0);\n      return radius + offset;\n  }\n\n  function adjustRadii(radii, sign, offsets) {\n      var top = offsets.reduce(function(prev, curr) { return prev + curr[0]; }, 0);\n      var right = offsets.reduce(function(prev, curr) { return prev + curr[1]; }, 0);\n      var bottom = offsets.reduce(function(prev, curr) { return prev + curr[2]; }, 0);\n      var left = offsets.reduce(function(prev, curr) { return prev + curr[3]; }, 0);\n\n      // Still need to max these with 0\n      radii[0][0] = adjustRadius(radii[0][0], sign, left);\n      radii[0][1] = adjustRadius(radii[0][1], sign, top);\n\n      radii[1][0] = adjustRadius(radii[1][0], sign, right);\n      radii[1][1] = adjustRadius(radii[1][1], sign, top);\n\n      radii[2][0] = adjustRadius(radii[2][0], sign, right);\n      radii[2][1] = adjustRadius(radii[2][1], sign, bottom);\n\n      radii[3][0] = adjustRadius(radii[3][0], sign, left);\n      radii[3][1] = adjustRadius(radii[3][1], sign, bottom);\n  }\n\n  ShapeValue.prototype.parseBox = function(text, metrics) {\n      var box = /margin-box|border-box|padding-box|content-box/.exec(text);\n      if (!box)\n          box = 'margin-box';\n      else\n          box = box[0];\n      var radii = JSON.parse(JSON.stringify(metrics.borderBox.radii));\n      var result = { text: box, x: metrics.borderBox.x, y: metrics.borderBox.y, width: metrics.borderBox.width, height: metrics.borderBox.height, 'radii': radii };\n      switch (box) {\n          case 'content-box':\n              adjustBounds(result, -1, [metrics.paddings, metrics.borders]);\n              adjustRadii(result.radii, -1, [metrics.paddings, metrics.borders]);\n              break;\n          case 'padding-box':\n              adjustBounds(result, -1, [metrics.borders]);\n              adjustRadii(result.radii, -1, [metrics.borders]);\n              break;\n          case 'border-box':\n              break;\n          case 'margin-box':\n              adjustBounds(result, 1, [metrics.margins]);\n              adjustRadii(result.radii, 1, [metrics.margins]);\n              break;\n      }\n      return result;\n  };\n\n  function pluck(arr, index) {\n      return arr.map(function(item) {\n          return item[index];\n      });\n  }\n\n  ShapeValue.prototype.printShape = function() {\n      if (this.shape) {\n          switch(this.shape.type) {\n              case 'inset':\n                  return 'inset(' + this.shape.insets.join(' ') +\n                      ' round ' + pluck(this.shape.radii, 0).join(' ') +\n                      ' / ' + pluck(this.shape.radii, 1).join(' ') + ')';\n              case 'circle':\n                  return 'circle(' + this.shape.r + ' at ' + this.shape.cx + ' ' + this.shape.cy + ')';\n              case 'ellipse':\n                  return 'ellipse(' + this.shape.rx + ' ' + this.shape.ry +\n                      ' at ' + this.shape.cx + ' ' + this.shape.cy + ')';\n              case 'polygon':\n                  return 'polygon(' + this.shape.fillRule + ', ' +\n                      this.shape.points.map(function(point) { return point.x + ' ' + point.y; }).join(', ') +\n                      ')';\n              default: return 'not yet implemented for ' + this.shape.type;\n          }\n      }\n      return 'no shape specified';\n  };\n\n  ShapeValue.prototype.printBox = function() {\n      if (this.box) {\n          return this.box.text + ' { x: ' + this.box.x + ', y: ' + this.box.y +\n              ', width: ' + this.box.width + ', height: ' + this.box.height +\n              ', radii: ' + pluck(this.box.radii, 0).join(' ') + ' / ' + pluck(this.box.radii, 1).join(' ') + ' }';\n      }\n      return 'no box specified';\n  };\n\n  ShapeValue.prototype.parseBasicShape = function(text, box, metrics) {\n      var shape = /(inset|circle|ellipse|polygon)\\((.*)\\)/.exec(text);\n      if (!shape)\n          return null;\n\n      var command = shape[1],\n          args = shape[2] ? shape[2] : '';\n\n      switch(command) {\n      case 'inset':\n          return this.parseInset(args, box, metrics);\n      case 'circle':\n          return this.parseCircle(args, box, metrics);\n      case 'ellipse':\n          return this.parseEllipse(args, box, metrics);\n      case 'polygon':\n          return this.parsePolygon(args, box, metrics);\n      default: return null;\n      }\n  };\n\n  ShapeValue.prototype.parseInset = function(args, box, metrics) {\n      // use the 'ro' in round and '/' as delimiters\n      var re = /((?:[^r]|r(?!o))*)?\\s*(?:round\\s+([^\\/]*)(?:\\s*\\/\\s*(.*))?)?/;\n      args = re.exec(args);\n      var result = {\n          type: 'inset',\n          insets: [0, 0, 0, 0],\n          radii: [[0, 0], [0, 0], [0, 0], [0, 0]]\n      };\n      if (args && args[1]) {\n          var insets = args[1].trim();\n          insets = insets.split(/\\s+/);\n          result.insets[0] = insets[0];\n          result.insets[1] = insets.length > 1 ? insets[1] : result.insets[0];\n          result.insets[2] = insets.length > 2 ? insets[2] : result.insets[0];\n          result.insets[3] = insets.length > 3 ? insets[3] : result.insets[1];\n          result.insets[0] = metrics.toPixels(result.insets[0], box.height);\n          result.insets[1] = metrics.toPixels(result.insets[1], box.width);\n          result.insets[2] = metrics.toPixels(result.insets[2], box.height);\n          result.insets[3] = metrics.toPixels(result.insets[3], box.width);\n      }\n\n      var radii;\n      if (args && args[2]) {\n          radii = args[2].trim();\n          radii = radii.split(/\\s+/);\n          if (radii.length < 2) radii.push(radii[0]);\n          if (radii.length < 3) radii.push(radii[0]);\n          if (radii.length < 4) radii.push(radii[1]);\n\n          result.radii = radii.map(function(radius) {\n              radius = metrics.toPixels(radius, box.width);\n              return [radius, radius];\n          });\n      }\n\n      if (args && args[3]) {\n          radii = args[3].trim();\n          radii = radii.split(/\\s+/);\n          if (radii.length < 2) radii.push(radii[0]);\n          if (radii.length < 3) radii.push(radii[0]);\n          if (radii.length < 4) radii.push(radii[1]);\n\n          radii.forEach(function(radius, i) {\n              result.radii[i][1] = metrics.toPixels(radius, box.height);\n          });\n      }\n\n      result.x = result.insets[3];\n      result.y = result.insets[0];\n      result.width = box.width - (result.insets[1] + result.insets[3]);\n      result.height = box.height - (result.insets[0] + result.insets[2]);\n\n      return result;\n  };\n\n  function positionOffsetToPixels(offset, extent, metrics) {\n      offset = offset.split(/\\s+/);\n      var direction = 'TopLeft';\n      var length = 0;\n\n      switch(offset[0]) {\n      case 'top': case 'left': break;\n      case 'bottom': case 'right': direction = 'BottomRight'; break;\n      case 'center': length = extent / 2.0; break;\n      default: length = metrics.toPixels(offset[0], extent);\n      }\n\n      if (offset.length > 1)\n          length = metrics.toPixels(offset[1], extent);\n\n      return direction === 'TopLeft' ? length : extent - length;\n  }\n\n  function radiusToPixels(r, sides, extent, metrics) {\n      if (r === 'closest-side')\n          return Math.min.apply(null, sides);\n      else if (r === 'farthest-side')\n          return Math.max.apply(null, sides);\n      else\n          return metrics.toPixels(r, extent);\n  }\n\n  // Parse but do not resolve yet (shared by circle and ellipse)\n  ShapeValue.prototype.parseEllipsoid = function(args) {\n      // use the 'a' in 'at' as the delimiter\n      var re = /((?:[^a]|a(?!t))*)?\\s*(?:at\\s+(.*))?/;\n      args = re.exec(args);\n\n      var result = { };\n\n      if (args && args[1]) {\n          var radii = args[1].trim();\n          radii = radii.split(/\\s+/);\n          result.rx = radii[0];\n          result.ry = radii.length > 1 ? radii[1] : radii[0];\n      } else {\n          result.rx = result.ry = 'closest-side';\n      }\n\n      var resolvedPositions = [];\n      if (args && args[2]) {\n          var positions = args[2].trim();\n          positions = positions.split(/\\s+/);\n          var canMergeBack = false;\n          positions.forEach(function(position) {\n              // if it is an offset\n              if (/\\d+/.test(position) && canMergeBack)\n                  resolvedPositions[resolvedPositions.length - 1] += ' ' + position;\n              else\n                  resolvedPositions.push(position);\n              // it's a non-center keyword and there are more than two inputs\n              canMergeBack = (/top|bottom|left|right/.test(position) && positions.length > 2);\n          });\n      }\n      while(resolvedPositions.length < 2)\n          resolvedPositions.push('center');\n      if (/top|bottom/.test(resolvedPositions[0]) || /left|right/.test(resolvedPositions[1])) {\n          var swap = resolvedPositions[0];\n          resolvedPositions[0] = resolvedPositions[1];\n          resolvedPositions[1] = swap;\n      }\n      result.cx = resolvedPositions[0];\n      result.cy = resolvedPositions[1];\n\n      return result;\n  };\n\n  ShapeValue.prototype.parseCircle = function(args, box, metrics) {\n      var result = this.parseEllipsoid(args);\n      result.type = 'circle';\n      result.cx = positionOffsetToPixels(result.cx, box.width, metrics);\n      result.cy = positionOffsetToPixels(result.cy, box.height, metrics);\n      result.r = radiusToPixels(result.rx, [\n          Math.abs(result.cx), Math.abs(box.width - result.cx),\n          Math.abs(result.cy), Math.abs(box.height - result.cy)\n      ], Math.sqrt((box.width * box.width + box.height * box.height) / 2), metrics);\n      delete result.rx;\n      delete result.ry;\n      return result;\n  };\n\n  ShapeValue.prototype.parseEllipse = function(args, box, metrics) {\n      var result = this.parseEllipsoid(args);\n      result.type = 'ellipse';\n      result.cx = positionOffsetToPixels(result.cx, box.width, metrics);\n      result.cy = positionOffsetToPixels(result.cy, box.height, metrics);\n      result.rx = radiusToPixels(result.rx, [Math.abs(result.cx), Math.abs(box.width - result.cx)], box.width, metrics);\n      result.ry = radiusToPixels(result.ry, [Math.abs(result.cy), Math.abs(box.height - result.cy)], box.height, metrics);\n      return result;\n  };\n\n  ShapeValue.prototype.parsePolygon = function(args, box, metrics) {\n      args = args.split(/\\s*,\\s*/);\n      var rule = 'nonzero';\n      if (args.length > 0 && /nonzero|evenodd/.test(args[0])) {\n          rule = args[0].trim();\n          args = args.slice(1);\n      }\n      var points = args.map(function(point) {\n          var coords = point.split(/\\s+/);\n          return { x: metrics.toPixels(coords[0], box.width), y: metrics.toPixels(coords[1], box.height) };\n      });\n      return {\n          type: 'polygon',\n          'fillRule': rule,\n          'points': points\n      };\n  };\n\n  ShapeValue.prototype.computeClip = function(referenceBox, metrics)\n  {\n      // margins: [marginTop, marginRight, marginBottom, marginLeft]\n      var marginLeft = metrics.margins[3];\n      var marginTop = metrics.margins[0];\n      var marginWidth = metrics.margins[3] + metrics.margins[1];\n      var marginHeight = metrics.margins[0] + metrics.margins[2];\n      return {x: -referenceBox.x - marginLeft, y: -referenceBox.y - marginTop, width: metrics.borderBox.width + marginWidth, height: metrics.borderBox.height + marginHeight};\n  };\n\n  ShapeValue.prototype.parseShapeMargin = function(margin, box, metrics) {\n      return parseInt(margin) ? Math.max(0, metrics.toPixels(margin, box.width)) : 0;\n  };\n\n  ShapeValue.prototype.parseShapeImageThreshold = function(threshold) {\n      var value = parseFloat(threshold);  // FIXME: disallow non-numerical values\n      return value ? Math.min(Math.max(0, value), 1.0) : 0;\n  };\n\n  function getStyleSheetElements() {\n      var doc = document,\n          stylesheets = [],\n          i, len;\n\n      if (typeof doc.querySelectorAll == 'function') {\n          // shiny new browsers\n          stylesheets = doc.querySelectorAll('link[rel=\"stylesheet\"], style');\n\n          // make it an array\n          stylesheets = Array.prototype.slice.call(stylesheets, 0);\n      } else {\n          // old and busted browsers\n\n          // <link rel=\"stylesheet\">\n          var tags = doc.getElementsByTagName(\"link\");\n\n          if (tags.length) {\n              for (i = 0, len = tags.length; i < len; i++) {\n                  if (tags[i].getAttribute('rel') === \"stylesheet\") {\n                      stylesheets.push(tags[i]);\n                  }\n              }\n          }\n\n          // <style>\n          tags = doc.getElementsByTagName(\"style\");\n          for (i=0, len = tags.length; i < len; i++) {\n              stylesheets.push(tags[i]);\n          }\n      }\n\n      return stylesheets;\n  }\n\n  function StyleSheet(source){\n      this.source = source;\n      this.url = source.href || null;\n      this.cssText = '';\n  }\n\n  StyleSheet.prototype.load = function(onSuccess, onError, scope) {\n      var self = this;\n\n      // Loading external stylesheet\n      if (this.url) {\n          var xhr = new XMLHttpRequest();\n\n          xhr.onreadystatechange = function() {\n              if(xhr.readyState === 4) {\n                  if (xhr.status === 200) {\n                      self.cssText = xhr.responseText;\n                      onSuccess.call(scope, self);\n                  } else {\n                      onError.call(scope, self);\n                  }\n              }\n          };\n\n          xhr.open('GET', this.url);\n          try {\n              xhr.send(null);\n          }\n          catch (e) {\n              console.log(\"An error occurred loading a stylesheet, probably because we can't access the local file system\");\n              onError.call(scope, self);\n          }\n      } else {\n          this.cssText = this.source.textContent;\n          onSuccess.call(scope, self);\n      }\n  };\n\n  function StyleLoader(callback) {\n      if (!(this instanceof StyleLoader)) {\n          return new StyleLoader(callback);\n      }\n\n      this.stylesheets = [];\n      this.queueCount = 0;\n      this.callback = callback || function(){};\n\n      this.init();\n  }\n\n  StyleLoader.prototype.init = function() {\n      var els = getStyleSheetElements(),\n          len = els.length,\n          stylesheet,\n          i;\n\n      this.queueCount = len;\n\n      for (i = 0; i < len; i++) {\n          stylesheet = new StyleSheet(els[i]);\n          this.stylesheets.push(stylesheet);\n          stylesheet.load(this.onStyleSheetLoad, this.onStyleSheetError, this);\n      }\n  };\n\n  StyleLoader.prototype.onStyleSheetLoad = function(stylesheet) {\n      this.queueCount--;\n      this.onComplete.call(this);\n  };\n\n\n  StyleLoader.prototype.onStyleSheetError = function(stylesheet) {\n      var len = this.stylesheets.length,\n          i;\n\n      for (i = 0; i < len; i++) {\n          if (stylesheet.source === this.stylesheets[i].source) {\n              // remove the faulty stylesheet\n              this.stylesheets.splice(i, 1);\n\n              this.queueCount--;\n              this.onComplete.call(this);\n              return;\n          }\n      }\n  };\n\n  StyleLoader.prototype.onComplete = function() {\n      if (this.queueCount === 0) {\n          // run the callback after all stylesheet contents have loaded\n          this.callback.call(this, this.stylesheets);\n      }\n  };\n\n  function StylePolyfill(callback) {\n      this.callback = callback || function() {};\n      var self = this;\n      new StyleLoader(function(stylesheets) {\n          self.onStylesLoaded(stylesheets);\n      });\n  }\n\n  StylePolyfill.prototype.onStylesLoaded = function(stylesheets) {\n      // use : and ; as delimiters, except between ()\n      // this will be sufficient for most, but not all cases, eg: rectangle(calc(100%))\n      var selector = \"\\\\s*([^{}]*[^\\\\s])\\\\s*{[^\\\\}]*\";\n      var value = \"\\\\s*:\\\\s*((?:[^;\\\\(]|\\\\([^\\\\)]*\\\\))*)\\\\s*;\";\n\n      var re, match;\n\n      var rules = [], properties = [\"shape-outside\", \"shape-margin\", \"shape-image-threshold\"];\n      properties.forEach(function(property) {\n          re = new RegExp(selector + \"(\" + property + \")\" + value, \"ig\");\n          stylesheets.forEach(function(stylesheet) {\n              while ((match = re.exec(stylesheet.cssText)) !== null) {\n                  rules.push({\n                      selector: match[1],\n                      property: match[2],\n                      value: match[3]\n                  });\n              }\n          });\n      });\n\n      this.callback(rules);\n  };\n\n  scope.ShapesPolyfill = new Polyfill(scope);\n  })(window);\n","/*!\n * @copyright Copyright (c) 2017 IcoMoon.io\n * @license   Licensed under MIT license\n *            See https://github.com/Keyamoon/svgxuse\n * @version   1.2.6\n */\n/*jslint browser: true */\n/*global XDomainRequest, MutationObserver, window */\n(function () {\n    \"use strict\";\n    if (typeof window !== \"undefined\" && window.addEventListener) {\n        var cache = Object.create(null); // holds xhr objects to prevent multiple requests\n        var checkUseElems;\n        var tid; // timeout id\n        var debouncedCheck = function () {\n            clearTimeout(tid);\n            tid = setTimeout(checkUseElems, 100);\n        };\n        var unobserveChanges = function () {\n            return;\n        };\n        var observeChanges = function () {\n            var observer;\n            window.addEventListener(\"resize\", debouncedCheck, false);\n            window.addEventListener(\"orientationchange\", debouncedCheck, false);\n            if (window.MutationObserver) {\n                observer = new MutationObserver(debouncedCheck);\n                observer.observe(document.documentElement, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true\n                });\n                unobserveChanges = function () {\n                    try {\n                        observer.disconnect();\n                        window.removeEventListener(\"resize\", debouncedCheck, false);\n                        window.removeEventListener(\"orientationchange\", debouncedCheck, false);\n                    } catch (ignore) {}\n                };\n            } else {\n                document.documentElement.addEventListener(\"DOMSubtreeModified\", debouncedCheck, false);\n                unobserveChanges = function () {\n                    document.documentElement.removeEventListener(\"DOMSubtreeModified\", debouncedCheck, false);\n                    window.removeEventListener(\"resize\", debouncedCheck, false);\n                    window.removeEventListener(\"orientationchange\", debouncedCheck, false);\n                };\n            }\n        };\n        var createRequest = function (url) {\n            // In IE 9, cross origin requests can only be sent using XDomainRequest.\n            // XDomainRequest would fail if CORS headers are not set.\n            // Therefore, XDomainRequest should only be used with cross origin requests.\n            function getOrigin(loc) {\n                var a;\n                if (loc.protocol !== undefined) {\n                    a = loc;\n                } else {\n                    a = document.createElement(\"a\");\n                    a.href = loc;\n                }\n                return a.protocol.replace(/:/g, \"\") + a.host;\n            }\n            var Request;\n            var origin;\n            var origin2;\n            if (window.XMLHttpRequest) {\n                Request = new XMLHttpRequest();\n                origin = getOrigin(location);\n                origin2 = getOrigin(url);\n                if (Request.withCredentials === undefined && origin2 !== \"\" && origin2 !== origin) {\n                    Request = XDomainRequest || undefined;\n                } else {\n                    Request = XMLHttpRequest;\n                }\n            }\n            return Request;\n        };\n        var xlinkNS = \"http://www.w3.org/1999/xlink\";\n        checkUseElems = function () {\n            var base;\n            var bcr;\n            var fallback = \"\"; // optional fallback URL in case no base path to SVG file was given and no symbol definition was found.\n            var hash;\n            var href;\n            var i;\n            var inProgressCount = 0;\n            var isHidden;\n            var Request;\n            var url;\n            var uses;\n            var xhr;\n            function observeIfDone() {\n                // If done with making changes, start watching for chagnes in DOM again\n                inProgressCount -= 1;\n                if (inProgressCount === 0) { // if all xhrs were resolved\n                    unobserveChanges(); // make sure to remove old handlers\n                    observeChanges(); // watch for changes to DOM\n                }\n            }\n            function attrUpdateFunc(spec) {\n                return function () {\n                    if (cache[spec.base] !== true) {\n                        spec.useEl.setAttributeNS(xlinkNS, \"xlink:href\", \"#\" + spec.hash);\n                        if (spec.useEl.hasAttribute(\"href\")) {\n                            spec.useEl.setAttribute(\"href\", \"#\" + spec.hash);\n                        }\n                    }\n                };\n            }\n            function onloadFunc(xhr) {\n                return function () {\n                    var body = document.body;\n                    var x = document.createElement(\"x\");\n                    var svg;\n                    xhr.onload = null;\n                    x.innerHTML = xhr.responseText;\n                    svg = x.getElementsByTagName(\"svg\")[0];\n                    if (svg) {\n                        svg.setAttribute(\"aria-hidden\", \"true\");\n                        svg.style.position = \"absolute\";\n                        svg.style.width = 0;\n                        svg.style.height = 0;\n                        svg.style.overflow = \"hidden\";\n                        body.insertBefore(svg, body.firstChild);\n                    }\n                    observeIfDone();\n                };\n            }\n            function onErrorTimeout(xhr) {\n                return function () {\n                    xhr.onerror = null;\n                    xhr.ontimeout = null;\n                    observeIfDone();\n                };\n            }\n            unobserveChanges(); // stop watching for changes to DOM\n            // find all use elements\n            uses = document.getElementsByTagName(\"use\");\n            for (i = 0; i < uses.length; i += 1) {\n                try {\n                    bcr = uses[i].getBoundingClientRect();\n                } catch (ignore) {\n                    // failed to get bounding rectangle of the use element\n                    bcr = false;\n                }\n                href = uses[i].getAttribute(\"href\")\n                        || uses[i].getAttributeNS(xlinkNS, \"href\")\n                        || uses[i].getAttribute(\"xlink:href\");\n                if (href && href.split) {\n                    url = href.split(\"#\");\n                } else {\n                    url = [\"\", \"\"];\n                }\n                base = url[0];\n                hash = url[1];\n                isHidden = bcr && bcr.left === 0 && bcr.right === 0 && bcr.top === 0 && bcr.bottom === 0;\n                if (bcr && bcr.width === 0 && bcr.height === 0 && !isHidden) {\n                    // the use element is empty\n                    // if there is a reference to an external SVG, try to fetch it\n                    // use the optional fallback URL if there is no reference to an external SVG\n                    if (fallback && !base.length && hash && !document.getElementById(hash)) {\n                        base = fallback;\n                    }\n                    if (uses[i].hasAttribute(\"href\")) {\n                        uses[i].setAttributeNS(xlinkNS, \"xlink:href\", href);\n                    }\n                    if (base.length) {\n                        // schedule updating xlink:href\n                        xhr = cache[base];\n                        if (xhr !== true) {\n                            // true signifies that prepending the SVG was not required\n                            setTimeout(attrUpdateFunc({\n                                useEl: uses[i],\n                                base: base,\n                                hash: hash\n                            }), 0);\n                        }\n                        if (xhr === undefined) {\n                            Request = createRequest(base);\n                            if (Request !== undefined) {\n                                xhr = new Request();\n                                cache[base] = xhr;\n                                xhr.onload = onloadFunc(xhr);\n                                xhr.onerror = onErrorTimeout(xhr);\n                                xhr.ontimeout = onErrorTimeout(xhr);\n                                xhr.open(\"GET\", base);\n                                xhr.send();\n                                inProgressCount += 1;\n                            }\n                        }\n                    }\n                } else {\n                    if (!isHidden) {\n                        if (cache[base] === undefined) {\n                            // remember this URL if the use element was not empty and no request was sent\n                            cache[base] = true;\n                        } else if (cache[base].onload) {\n                            // if it turns out that prepending the SVG is not necessary,\n                            // abort the in-progress xhr.\n                            cache[base].abort();\n                            delete cache[base].onload;\n                            cache[base] = true;\n                        }\n                    } else if (base.length && cache[base]) {\n                        setTimeout(attrUpdateFunc({\n                            useEl: uses[i],\n                            base: base,\n                            hash: hash\n                        }), 0);\n                    }\n                }\n            }\n            uses = \"\";\n            inProgressCount += 1;\n            observeIfDone();\n        };\n        var winLoad;\n        winLoad = function () {\n            window.removeEventListener(\"load\", winLoad, false); // to prevent memory leaks\n            tid = setTimeout(checkUseElems, 0);\n        };\n        if (document.readyState !== \"complete\") {\n            // The load event fires when all resources have finished loading, which allows detecting whether SVG use elements are empty.\n            window.addEventListener(\"load\", winLoad, false);\n        } else {\n            // No need to add a listener if the document is already loaded, initialize immediately.\n            winLoad();\n        }\n    }\n}());\n"],"sourceRoot":""}